<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/core/favicon.ico"/><title>@magic/core concepts</title><meta name="description" content="@magic/core conceptual information."/><link rel="stylesheet" href="/core/magic.css?AQx0iUmBlf" integrity="sha384-AQx0iUmBlf4crvJMTTEGZqWGVunK7NtY6px+Elci8Ch01BoAiGkcW6rcab5XalXy" crossorigin="anonymous"/></head><body><div id="Magic" class="dark"><div class="Wrapper"><header class="Header"><a class="LogoWrapper" href="/core/"><img class="Logo" src="/core/logo.png" role="presentation" alt=""/><span class="LogoText">@magic</span></a><nav class="Menu"><ul><li class="MenuItem active"><a href="/core/concepts/">concepts</a><ul><li class="MenuItem"><a href="/core/concepts/#modules">modules</a></li><li class="MenuItem"><a href="/core/concepts/#state">state</a></li><li class="MenuItem"><a href="/core/concepts/#actions">actions</a></li><li class="MenuItem"><a href="/core/concepts/#views">views</a></li><li class="MenuItem"><a href="/core/concepts/#styles">styles</a></li><li class="MenuItem"><a href="/core/concepts/#globals">global</a></li><li class="MenuItem"><a href="/core/concepts/#lambdas">server lambdas</a></li><li class="MenuItem"><a href="/core/concepts/#libs">external libs</a></li></ul></li><li class="MenuItem"><a href="/core/files/">files &amp; directories</a></li><li class="MenuItem"><a href="/core/modules/">modules</a></li><li class="MenuItem"><a href="/core/themes/">themes</a></li><li class="MenuItem"><a href="/core/libraries/">libraries</a></li></ul></nav></header><div class="Page"><h1>@magic/core concepts</h1><p>magic concepts. These are the building blocks of every module in a magic app</p><div><h2 id="modules">@magic-modules</h2><p>modules are the main building block of magic.</p><p>a page is a module, a button is a module, a link is a module, an image is a module. a @magic app contains modules containing modules that contain modules. this can lead to inception.</p></div><div><h2 id="state">state</h2><div><p>state is a javascript object.</p><p>state can be mutated by actions or effects.</p><p>every rendering step, the state determines the output of the view</p></div></div><div><h2 id="actions">actions</h2><p>actions are an object containing functions</p><p>those functions get the state and their props and may return a new full, but changed, state.</p></div><div><h2 id="effects">effects</h2><p>effects are an object containing functions, just like actions.</p><p>they behave like actions, get a state and props and may return a new full, but changed, state.</p><p>alternatively, you can call any action from within any other action.</p></div><div><h2 id="views">views</h2><p>views render the state to html</p><p>whenever an action triggers a statechange, this statechange then triggers a view change.</p></div><div><h2 id="styles">styles</h2><p>every module can have a style object attached to it.</p><p>magic will automagically merge all styles into one global css file.</p><p>in the future, it will also remove unused styles for you.</p><p>style merge order from lowest to highest:</p><p>module.style &lt; page.style &lt; app.style &lt; theme.style</p><h3 id="styles-magic-css">@magic/css</h3><p>internally, magic uses it&#39;s own css-in-js library.</p><p>to find out more, click the following link:</p><a href="https://magic.github.io/css/" target="_blank" rel="noopener">@magic/css</a></div><div><h2 id="globals">global</h2><p>every module can set a global object, containing state and action properties.</p><p>every key in the mod.global object that is set to true gets merged into the main app state/actions.</p></div><div><h2 id="lambdas">server lambdas</h2><p>this is the serverside magic.</p><p>you can define functions that get transpiled into serverside lambdas.</p><p>server side lambdas will be available for GET and POST requests.</p><p>the server side function signature is (req, res) =&gt; {}, as in any nodejs http server, with the addition of req.body being async =&gt; awaited before execution of the lambda.</p></div><div><h2 id="libs">external libs</h2><p>what would javascript be without the millions of dependencies that you can easily install and make the average webpage  slow[ly] (pun intended) grow towards a footprint of 5 megabytes.</p><p>as the sarcastic remark might demonstrate, we think that all of that bloat is unneeded, unheeded and, frankly, not optimal.</p><p>magic has one external client side dependency, <a href="https://github.com/jorgebucharan/hyperapp" target="_blank" rel="noopener">hyperapp</a>, [~400 lines that provide our ui state machine]. thats it. and it won&#39;t change.</p><p>we also have the tendency to write libraries specialized for our usecase, see @magic/css, @magic/test, @magic/</p><p>once there is a lib key in at least one component, window.lib (browser) and global.lib (nodejs) will be set, aliasing lib as a global variable in both environments</p><h3 id="libs-dir-or-file">lib dir or file</h3><p>if you need libraries in multiple otherwise independent modules, it might be easier to keep your library dependencies in a central place. to achieve this, one can simply create /assets/lib.mjs and export an object from it. this object will get merged into the globalThis.lib object that is available throughout your app.<div class="Pre"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> { <span class="colon">name</span>: () =&gt; {} }</code></pre></div>will turn into<div class="Pre"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="object">lib</span>.<span class="property">name</span> = () =&gt; {}</code></pre></div></p></div><button class="LightSwitch"></button></div><footer class="Footer"><div class="Container">made with a few bits of <a target="_blank" rel="noopener" href="https://github.com/magic/core">magic</a></div></footer></div></div><script type="module" src="/core/magic.js?d9UmZp/BRW" integrity="sha384-d9UmZp/BRWAdY761W63to29hEF9DBXmPa1deR/eDANbf3U4Eg/+/6KUmktTIJiOc" crossorigin="anonymous"></script></body></html>