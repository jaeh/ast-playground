<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/core/favicon.ico"/><title>@magic/core library docs</title><meta name="description" content="@magic/core libraries allow you to include client side functionality in your app."/><link rel="stylesheet" href="/core/magic.css"/></head><body><div id="magic"><div class="wrapper"><header class="main"><a class="logo-wrapper" href="/core/"><img class="logo" src="/core/logo.png" role="presentation" alt=""/><span class="logo-text">@magic</span></a><nav class="Menu"><ul><li><a href="/core/concepts/">concepts</a></li><li><a href="/core/files/">files &amp; directories</a></li><li><a href="/core/modules/">modules</a></li><li><a href="/core/themes/">themes</a></li><li><a href="/core/libraries/">libraries</a></li></ul></nav></header><div class="page"><h1>@magic/core library docs</h1><h3 id="require">require</h3><h4 id="require-assets">require in /assets/lib/index.js</h4><p>if /assets/lib/index.js or /assets/lib.js exist, whatever those files export will be merged into LIB.</p><div class="Pre light"><div class="menu"><button>dark</button><button>copy</button></div><pre><code class="line"><code class="line comment">// /assets/lib/index.js or /assets/lib.js</code></code><code class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = {</code><code class="line">  <span class="colon">JSON</span>: <span class="string">&#39;@magic-client/json&#39;</span>,</code><code class="line"><code class="line comment">  // ./localLib resolves to /assets/lib/localLib.js</code></code><code class="line">  <span class="colon">localLib</span>: <span class="keyword">require</span>.<span class="property">resolve</span>(<span class="string">&#39;./localLib&#39;</span>),</code><code class="line">}</code></pre></div><h4 id="require-app">require in /app.js</h4><p>if /assets/app.js exports a lib key, app.lib will be merged into LIB</p><div class="Pre light"><div class="menu"><button>dark</button><button>copy</button></div><pre><code class="line"><code class="line comment">// /app.js</code></code><code class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = {</code><code class="line"><code class="line comment">  // ... other app variables (state, actions, View etc)</code></code><code class="line">  <span class="colon">lib</span>: {</code><code class="line">    <span class="colon">JSON</span>: <span class="string">&#39;@magic-modules/json&#39;</span>,</code><code class="line">    <span class="colon">localLib</span>: <span class="keyword">require</span>.<span class="property">resolve</span>(<span class="string">&#39;./assets/lib/localLib&#39;</span>),</code><code class="line">  },</code><code class="line">}</code></pre></div><h4 id="require-page">require in pages or Modules</h4><p>if a page or Module exports a lib key, it will be merged into LIB</p><div class="Pre light"><div class="menu"><button>dark</button><button>copy</button></div><pre><code class="line"><code class="line comment">// /pages/index.js</code></code><code class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = {</code><code class="line"><code class="line comment">  // ... other page variables (state, actions, View etc)</code></code><code class="line">  <span class="colon">lib</span>: {</code><code class="line">    <span class="colon">JSON</span>: <span class="string">&#39;@magic-modules/json&#39;</span>,</code><code class="line">    <span class="colon">localLib</span>: <span class="keyword">require</span>.<span class="property">resolve</span>(<span class="string">&#39;./assets/lib/localLib&#39;</span>),</code><code class="line">  },</code><code class="line">}</code></pre></div><h3 id="example">example</h3><p>first import the library, see <a href="/core/libraries/#require">require</a></p><div class="Pre light"><div class="menu"><button>dark</button><button>copy</button></div><pre><code class="line">div([<span class="string">&#39;LIB.test output: &#39;</span>, <span class="object">LIB</span>.<span class="property">test</span>(<span class="string">&#39;magic&#39;</span>)])</code></pre></div><p>renders</p><div><h4>LIB.test output: </h4><b>this string gets exported using module.exports the argument it received was magic</b></div><div><h4>LIB.exportsTesting.testing output: </h4>this string comes from a file that uses exports.testing to export it.</div><h4 id="caveat">caveat</h4><p>all libs must either export a single object using module.expots OR using exports.key mappings. one OR the other. when using exports.key to export, you will always get an object in LIB. when using module.exports, structuring the LIB[name] object is up to you.</p></div><footer class="main"><div class="wrapper">made with a few bits of <a target="_blank" rel="noopener" href="https://github.com/magic/core">magic</a></div></footer></div></div><script src="/core/magic.js"></script></body></html>