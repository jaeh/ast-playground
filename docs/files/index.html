<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="icon" href="/core/favicon.ico"/><title>@magic/core files</title><meta name="twitter:image" property="og:image" content="https://magic.github.io/core/core/logo.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="@magic/core directory docs."/><meta name="author" content="Jascha Ehrenreich"/><script type="application/ld+json">{"@context":"http://schema.org","@type":"website","name":"@magic/core documentation","url":"https://magic.github.io/core","about":"@magic framework core.","image":"https://magic.github.io/core/core/logo.png","author":{"@type":"person","name":"Jascha Ehrenreich","jobTitle":"Technomancer","image":"https:/jaeh.at/img/jascha.ehrenreich.jpg","url":"https://jaeh.at"}}</script><link rel="stylesheet" href="/core/magic.css?AuBbOOGV8V" integrity="sha384-AuBbOOGV8V7qwYuRRjL5HCXKKhRj29IGC4ARqET5FICjYTDqs0g9AL85rr8xI53/" crossorigin="anonymous"/></head><body><a class="SkipLink" href="/core/#page">Skip to Content</a><main id="Magic"><div class="Wrapper"><header class="Header"><a class="Logo" href="/core/"><img src="/core/logo.png" role="presentation" alt=""/><span>@magic</span></a><nav class="Menu"><ul><li><a href="/core/concepts/">concepts</a></li><li class="active"><a href="/core/files/">files &amp; directories</a><ul><li><a href="/core/files/#pages">/pages</a></li><li><a href="/core/files/#assets">/assets</a></li><li><a href="/core/files/#static">/assets/static</a></li><li><a href="/core/files/#themes">/assets/themes</a></li><li><a href="/core/files/#app">/assets/app.mjs</a></li><li><a href="/core/files/#config">/config.mjs</a></li></ul></li><li><a href="/core/modules/">modules</a></li><li><a href="/core/themes/">themes</a></li><li><a href="/core/libraries/">libraries</a></li><li><a href="/core/news/">news</a></li></ul></nav></header><div class="Page" id="page"><h1 id="magiccore-files">@magic/core files</h1><p>There are multiple magic files and directories.</p><ul><li>/pages - files in the page directory map to urls in your app.</li><li>/assets - custom components, @magic-modules get imported here</li><li>/assets/static - static files</li><li>/assets/themes - theme directory, @magic-themes get imported here</li><li>/assets/lib.mjs - imports npm and local but external packages into your app</li><li>/app.mjs - gets merged into the app, can set state, actions, style here</li><li>/config.mjs - custom config for your app</li><li>/assets/Menu.mjs - custom Menu for your app</li></ul><h2 id="pages">/pages</h2><p>the pages dir contains the pages of your webapp.</p><p>each page has it&#39;s own state and actions,
but also inherits the global state and actions from the app and it&#39;s dependencies</p><h3 id="pages-dir-structure">pages directory to url map</h3><p>for the domain mag.ic:</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">/pages/<span class="object">index</span>.<span class="property">mjs</span> === <span class="colon">http</span>:<span class="comment">//<span class="object">mag</span>.<span class="property">ic</span>/ </span></code><code class="line">/pages/<span class="object">pageName</span>.<span class="property">mjs</span> === <span class="colon">http</span>:<span class="comment">//<span class="object">mag</span>.<span class="property">ic</span>/pageName/ </span></code><code class="line">/pages/page-<span class="object">name</span>.<span class="property">mjs</span> === <span class="colon">http</span>:<span class="comment">//<span class="object">mag</span>.<span class="property">ic</span>/page-name/ </span></code><code class="line">/pages/<span class="object">page_name</span>.<span class="property">mjs</span> === <span class="colon">http</span>:<span class="comment">//<span class="object">mag</span>.<span class="property">ic</span>/page_name/ </span></code><code class="line">/pages/dir/<span class="object">index</span>.<span class="property">mjs</span> === <span class="colon">http</span>:<span class="comment">//<span class="object">mag</span>.<span class="property">ic</span>/dir/ </span></code><code class="line">/pages/dir/<span class="object">name</span>.<span class="property">mjs</span> === <span class="colon">http</span>:<span class="comment">//<span class="object">mag</span>.<span class="property">ic</span>/dir/name/ </span></code></pre></div><h1 id="pages-example">example page</h1><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="state">state</span>: {</code><code class="line">    <span class="colon">variable</span>: <span class="string">&#39;test&#39;</span>,</code><code class="line">  },</code><code class="line">  <span class="actions">actions</span>: {</code><code class="line">    <span class="colon">changeVar</span>: () =&gt; ({ <span class="colon">variable</span>: <span class="string">&#39;changed&#39;</span> }),</code><code class="line">  },</code><code class="line">  <span class="colon">style</span>: {</code><code class="line">    <span class="string">&#39;.cl&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;green&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">  <span class="colon">View</span>: <span class="state">state</span> =&gt; div({ <span class="colon">class</span>: <span class="string">&#39;cl&#39;</span> }, [</code><code class="line">    <span class="string">&#39;<span class="keyword">this</span> is the page content.&#39;</span>,</code><code class="line">    <span class="state">state</span>.<span class="property">variable</span>,</code><code class="line">  ]),</code><code class="line">}</code></pre></div><h2 id="assets">assets</h2><p>the assets dir contains custom components of your app.</p><p>you can import additional @magic-modules here</p><h3 id="assets-example">example /assets/index.mjs</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="colon">Custom</span>: () =&gt; div(<span class="string">&#39;custom component&#39;</span>),</code><code class="line">  <span class="colon">Pre</span>: <span class="keyword">require</span>(&#39;@magic-modules/pre),</code><code class="line">}</code></pre></div><h2 id="static">/assets/static</h2><p>the static dir contains all of your static assets.
every file in this directory gets copied to the public dir.
image and svg files get minified using imagemin.</p><p>text and binary files get compressed using the optional
<a href="https://github.com/jaeh/node-zopfli-es" target="_blank" rel="noopener">node-zopfli-es</a>
(if it is installed)</p><h2 id="themes">/assets/themes</h2><p>the themes directory contains... themes.</p><p>a magic theme is an object of css rules, see
<a href="https://github.com/magic/css/" target="_blank" rel="noopener">@magic/css</a>
for more examples and documentation.</p><h3 id="themes-example">example theme</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="string">&#39;body&#39;</span>: {</code><code class="line">    <span class="colon">color</span>: <span class="string">&#39;blue&#39;</span>,</code><code class="line">  },</code><code class="line">}</code></pre></div><h2 id="app">/assets/app.mjs</h2><p>the /app.mjs file allows you to set global state, actions, and styles</p><h3 id="app-example">example /app.mjs</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="state">state</span>: {</code><code class="line">    <span class="colon">globalStateVar</span>: <span class="string">&#39;globally available&#39;</span>,</code><code class="line">  },</code><code class="line">  <span class="actions">actions</span>: {</code><code class="line">    <span class="colon">globalAction</span>: () =&gt; ({ <span class="colon">globalStateVar</span>: <span class="string">&#39;overwritten.&#39;</span> }),</code><code class="line">  },</code><code class="line">  <span class="colon">style</span>: {</code><code class="line">    <span class="string">&#39;body&#39;</span>: {</code><code class="line">      <span class="colon">color</span>: <span class="string">&#39;green&#39;</span>,</code><code class="line">    },</code><code class="line">  },</code><code class="line">}</code></pre></div><h2 id="config">/config.mjs</h2><p>the /config.mjs file allows you to set various aspects of your app</p><h3 id="config-example">example /config.mjs</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="colon">ROOT</span>: <span class="string">&#39;example&#39;</span>,</code><code class="line">  <span class="colon">THEME</span>: <span class="string">&#39;blue&#39;</span>,</code><code class="line">  <span class="colon">WEB_ROOT</span>: <span class="string">&#39;/core/&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// <span class="keyword">this</span> option adds the </span></code><code class="line">  <span class="comment">// <span class="string">&#39;X-Clacks-Overhead&#39;</span>, &#39;GNU Terry Pratchet&#39; </span></code><code class="line">  <span class="comment">// http header </span></code><code class="line">  <span class="comment">// see <a href="http://www.gnuterrypratchett.com/" target="_blank" rel="noopener">http://www.gnuterrypratchett.com/</a></span></code><code class="line">  <span class="colon">FOR_DEATH_CAN_NOT_HAVE_HIM</span>: <span class="boolean">true</span>,</code><code class="line"></code><code class="line">  <span class="comment">// <span class="keyword">default</span> CLIENT_LIB_NAME, overwrite to change names of transpiled css and js files </span></code><code class="line">  <span class="colon">CLIENT_LIB_NAME</span>: <span class="string">&#39;magic&#39;</span>,</code><code class="line">}</code></pre></div><p><a href="https://github.com/magic/core/blob/master/src/modules/Menu.mjs" target="_blank" rel="noopener">Menu.mjs on github</a></p></div><footer class="Footer"><div class="Container"><div class="Credits">made with a few bits of <a target="_blank" rel="noopener" href="https://github.com/magic/core">magic</a></div></div></footer></div></main><script src="/core/magic.js?aSA1zeXIhc" integrity="sha384-aSA1zeXIhcXesx1cHXlzTfk17SzLe13f5hcfGDpE4F7vt6SIUQA9BSzJv5Y147Ue" crossorigin="anonymous"></script></body></html>