(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function c(a){return m(a)||e(a)||k()}function e(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}function f(a,b){if(a==null)return{};var c=g(a,b);var d,e;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(e=0;e<f.length;e++)d=f[e],!(b.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(a,d)&&(c[d]=a[d])}return c}function g(a,b){if(a==null)return{};var c={};var d=Object.keys(a);var e,f;for(f=0;f<d.length;f++)e=d[f],!(b.indexOf(e)>=0)&&(c[e]=a[e]);return c}function j(a,b){return m(a)||l(a,b)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(a,b){var c=[];var d=!0;var e=!1;var f=undefined;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]!=null&&h["return"]()}finally{if(e)throw f}}return c}function m(a){if(Array.isArray(a))return a}function n(a){return n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function n(a){return typeof a}:function n(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},n(a)}var o=require("hyperapp"),q=o.app,r=o.h;var h=function(a){return function(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var d=!!(arguments.length>1&&arguments[1]!==undefined)&&arguments[1];var e=function is(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.some(function(b){return b===n(a)})};return!d&&(e(b,"string","number","function")||Array.isArray(b)?(d=b,b={}):e(b.View,"function")&&(d=b.View,b={})),r(a,b,d)}};var s=h("div");var t=h("button");var u=h("code");var v=h("pre");var w=function Pre(a){var b=!!(arguments.length>1&&arguments[1]!==undefined)&&arguments[1];return function(c,d){return s({"class":"Pre ".concat(b||c.pre.theme)},[s({"class":"menu"},[!b&&t({onclick:d.pre.changeTheme},c.pre.theme==="dark"?"light":"dark"),t({onclick:function onclick(){return d.pre.clip(a)}},"copy")]),v(LIB.PRE.format(a).map(function(a){var b=j(a,2),c=b[0],d=b[1];return u(c,d)}))])}};w.View=function(){return w.apply(void 0,arguments)};var x=h("a");var a=h("text");var y=function Link(a,b){var c=a.to,d=f(a,["to"]);return function(a,g){var h=d.href,i=d.text,j=d.nofollow,k=d.noreferrer,l=d.onclick,m=f(d,["href","text","nofollow","noreferrer","onclick"]);return c=c||h||"",m.href=c,c&&c.startsWith("/")&&!c.startsWith("//")?m.onclick=function(a){l&&l({e:a,to:c}),g.go({e:a,to:c})}:(m.target="_blank",m.rel="noopener",j&&(m.rel+=" nofollow"),k&&(m.rel+=" noreferrer")),x(m,[i,b])}};var z=h("h1");var A=h("h2");var B=h("li");var C=h("p");var D=h("ul");var p=h("h3");var E=h("i");var i=h("nav");var F=h("span");var G={View:function View(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"menu";return function(b){typeof a==="string"&&(a={name:a});var c=a,d=c.name,e=d===void 0?"menu":d,g=c["class"],h=g===void 0?"Menu":g,j=c.items,k=j===void 0?[]:j,l=c.collapse;var n=b.url,o=b[e],p=o===void 0?[]:o;if(k=k.length?k:p,!!k.length){b.hash&&(n+="#".concat(b.hash));var q=function Item(a){var b=a.text,c=a.items,d=c===void 0?[]:c,e=f(a,["text","items"]);if(e.to||b){var g={};e.to===n&&(g["class"]="active");var h;return d&&(n.startsWith(e.to)||!(l===void 0||l))&&(h=D(d.map(function(a){return q(a)}))),B(g,[e.to?y(e,b):F(e,b),h])}};return i({"class":h.includes("Menu")?h:"Menu ".concat(h)},D(k.map(function(a){return q(a)})))}}}};var H=h("img");var I=function Img(a){return function(){if(typeof a==="string"&&(a={src:a}),!!a.src)return!a.alt&&(a.title?a.alt=a.title:(a.role="presentation",a.alt="")),H(a)}};var J=h("footer");var K={View:function View(a){return s({"class":"Mod View"},[p("Mod.View"),C(["this is Mod.View. it gets loaded from ",y({to:"https://github.com/magic/core/example/assets/module.js"},"/assets/module.js")]),C(["and imported in ",y({to:"https://github.com/magic/core/example/assets/index.js"},"/assets/index.js")]),C(["the state of this module: ",JSON.stringify(a.module)])])},Component:function Component(){return s({"class":"Mod Component"},[p("Mod.Component"),C(["Mod.Component, a second component in ",y({to:"https://github.com/magic/core/example/assets/module.js"},"/assets/module.js")])])}};var L=h("h4");var M=function GitBadges(a){var b=a.project,c=b!==void 0&&b,d=a.branch,e=d===void 0?"master":d;var f=Object.entries({npm:function npm(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:c;return a&&{to:"https://www.npmjs.com/package/@".concat(a),src:"https://img.shields.io/npm/v/@".concat(a,".svg")}},travis:function travis(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:c;return a&&{to:"https://travis-ci.com/".concat(a),src:"https://travis-ci.com/".concat(a,".svg?branch=").concat(e)}},appveyor:function appveyor(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:c;return a&&{to:"https://ci.appveyor.com/project/".concat(a,"/branch/").concat(e),src:"https://img.shields.io/appveyor/ci/".concat(a,"/").concat(e,".svg")}},coveralls:function coveralls(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:c;return a&&{to:"https://coveralls.io/github/".concat(a),src:"https://coveralls.io/repos/github/".concat(a,"/badge.svg")}},greenkeeper:function greenkeeper(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:c;return a&&{to:"https://greenkeeper.io",src:"https://badges.greenkeeper.io/".concat(a,".svg")}},snyk:function snyk(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:c;return a&&{to:"https://snyk.io/test/github/".concat(a),src:"https://snyk.io/test/github/".concat(a,"/badge.svg")}}}).map(function(b){var c=j(b,2),d=c[0],e=c[1];return e(a[d])}).filter(function(b){return b.to&&b.src});return f.length?D({"class":"GitBadges"},f.map(function(a){var b=a.to,c=a.src;return B([y({to:b},I({src:c}))])})):void 0};var N=function component(a){return function(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var c=!!(arguments.length>1&&arguments[1]!==undefined)&&arguments[1];var d=function is(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.some(function(b){return b===n(a)})};return!c&&(d(b,"string","number","function")||Array.isArray(b)?(c=b,b={}):d(b.View,"function")&&(c=b.View,b={})),r(a,b,c)}};var O=h("object");var P={View:function View(){return J({"class":"main"},[s({"class":"wrapper"},["made with a few bits of ",y({to:"https://github.com/magic/core",target:"_blank",rel:"noopener"},"magic")])])}};var Q=h("header");var R=function PageHead(a){return(a.logo||a.menu||a.tagline)&&Q({"class":"main"},[(a.logo||a.logotext)&&y({to:"/core/","class":"logo-wrapper"},[a.logo&&I({"class":"logo",src:a.logo}),a.logotext&&F({"class":"logo-text"},a.logotext)]),G.View])};var S=h("b");var b={};(function(){var a="\nlet this long package float\ngoto private class if short\nwhile protected with debugger case\ncontinue volatile interface\n\ninstanceof super synchronized throw\nextends final export throws\ntry import double enum\n\nboolean abstract function\nimplements typeof transient break\ndefault do static void\n\nint new async native switch\nelse delete null public var\nawait byte finally catch\nin return for get const char\nmodule exports require\n".trim().split(/\b/g).map(function(a){return a.trim()});var d="\nArray Object String Number RegExp Null Symbol\nSet WeakSet Map WeakMap\nsetInterval setTimeout\nPromise\nJSON\nInt8Array Uint8Array Uint8ClampedArray\nInt16Array Uint16Array\nInt32Array Uint32Array\nFloat32Array Float64Array\n".trim().split(/\b/g).map(function(a){return a.trim()});var f=function wrapWords(b){if(typeof b!=="string")return b;var c=b.split(/\b/);return b=c.map(function(b,f){if(b!==""){var g="";return b==="state"?g="state":b==="actions"?g="actions":c[f+1]&&c[f+1].includes(":")?g="colon":a.includes(b)?g="keyword":d.includes(b)?g="builtin":"true false".includes(b)?g="boolean":c[f-1]==="."?g="property":c[f+1]==="."&&(g="object"),g&&(b=F({"class":g},b)),b}}),b};var h=function wordsByLine(a){var b=a.indexOf("//");var d=a.trim();if(d.startsWith("//")){var t=a.search(/\S|$/);var v="";for(var w=0;w<t;w++)v+=" ";return!d.startsWith("// ")&&(a="".concat(v,"// ").concat(d.substr(2))),u({"class":"line comment"},[v,"// ",h(d.substring(3))])}if(b>-1&&a[b-1]!==":"){var x=a.indexOf("//");var z=a.substring(0,x);var A=a.substring(x);return u({"class":"line"},[h(z),F({"class":"comment"},h(A))])}if(a.indexOf("://")>2)return a.split(/(?= )/).map(function(a){return a.includes("://")?y({to:a},a):h(a)});if(a.indexOf("@")&&a.includes(".")&&!a.trim().includes(" ")){a=a.replace("mailto:","");var B=a.split(/\b/g);var C=!1;var D="";var E=/[^A-Za-z0-9.:]/g;if(B.map(function(a,b){var c=!1;a==="mailto"?(c=!0,C=!0,D=a):c||a!=="@"?E.test(a)&&(C=!1):(C=!0,D=B[b-1]+a,B[b-1]=null),C&&!E.test(a)&&(D+=a)}),D){var e=a.split(D),g=j(e,2),i=g[0],k=g[1];var G=D;return D.startsWith("mailto:")?D=D.replace("mailto:",""):G="mailto:".concat(D),[i,y({"class":"email",to:G},D),k]}return a}var l=a.replace(/"/g,"'");var m=l.split("'"),n=c(m),o=n[0],p=n[1],q=n.slice(2);var r=q;r.length===1?r=h(r[0]):r.length>1&&(r=h(r.join("'")));var s=[];return s=typeof p==="undefined"?f(a):[f(o),F({"class":"string"},"'".concat(p,"'")),r],s};var i=function wrapLine(a){return[{"class":"line"},h(a)]};b.PRE={keywords:a,builtins:d,format:function format(a){return a.trim().split("\n").map(i)},wordsByLine:h,wrapWords:f}})(),b.exportsTesting=b.exportsTesting||{},function(){b.exportsTesting.testing=function(){return"this string comes from a file that uses exports.testing to export it."}}(),function(){b.test=function(b){return S("".concat("this string gets exported using module.exports"," the argument it received was ").concat(b))}}(),window.LIB=b;var T={"/core/concepts/":function coreConcepts(a){var b={state:"\n// state variables can be anything you can JSON.stringify()\nstate: {\n  variable: true,\n  args: 'none',\n}",actions:"\n// actions are an object containing functions.\n// if an action returns an object, this object gets merged into the state\nactions: {\n  changeVariable: args => state => ({\n    variable: !state.variable,\n    args,\n  }),\n  callActionInAction: () => async (state, actions) => {\n    // just await something inside an action to create an async action\n    await new Promise(resolve => {\n      setTimeout(resolve, 200)\n    })\n\n    // actions can call other actions\n    actions.changeVariable('arg passed to function')\n  },\n}",global:"\nglobal: {\n  state: {\n    variable: true,\n    args: true,\n  },\n  actions: {\n    callActionInAction: true,\n    changeVariable: true,\n  },\n}",view:"\nView: (state, actions) => (\n  div({ onclick: actions.callActionInAction }, state.variable)\n)",style:"\nstyle: {\n  '.className': {\n    color: 'green',\n\n    // expands to .className:hover because of the &\n    '&:hover': {\n      color: 'orange',\n    },\n\n    // expands to .className .childClass\n    '.childClass': {\n      color: 'blue',\n    },\n  },\n  // css ids\n  '#id': {\n    color: 'yellow',\n  },\n  // default html tag styles\n  div: {\n    color: 'black',\n  },\n}",server:"\nserver: (req, res) => {\n  const { name } = req.body\n  res.writeHead(200, { 'content-type': 'text/plain' })\n  res.end(`hello, ${name}`)\n}",complexServer:"\nserver: {\n  index: (req, res) => {\n    res.writeHead(200, { 'content-type': 'text/plain' })\n    res.end('index route')\n  },\n  route: (req, res) => {\n    res.writeHead(200, { 'content-type': 'text/plain' })\n    res.end('api route')\n  },\n}",lib:"\nlib: {\n  local: require.resolve('./lib/local.js'),\n  npm: 'npm-lib',\n}"};var c=function indent(a){return a.split("\n").map(function(a){return"  ".concat(a)}).join("\n")};var d="\nconst exampleModule = {\n  ".concat(c(b.state),",\n  ").concat(c(b.actions),",\n  ").concat(c(b.style),",\n  ").concat(c(b.view),",\n  ").concat(c(b.global),",\n  ").concat(c(b.lib),",\n  ").concat(c(b.server),",\n}");return[z(a.title),C("magic concepts. These are the building blocks of every module in a magic app"),s([A({id:"philosophy"},"philosophy")]),s([A({id:"modules"},"modules"),C("modules are the main building block of magic."),C("modules can include state, actions, style and multiple components (which we call Views)."),C("View names have to start with an uppercased character. Every module can export multiple components that share state, actions and styles.")]),s([A({id:"state"},"state"),s([C("state is a javascript object."),C("state can be mutated by actions."),C("every rendering step, the state determines the output of the view"),p({id:"state-example"},"state example"),w.View(b.state)])]),s([A({id:"actions"},"actions"),C("actions are an object containing functions"),C("those functions get the state and actions and may return a new partial state."),C("alternatively, you can call any action from within any other action."),p({id:"actions-example"},"actions example"),w.View(b.actions)]),s([A({id:"views"},"views"),C("views render the state to html"),C("whenever an action triggers a statechange, this statechange then triggers a view change."),p({id:"views-example"},"views example"),w.View(b.view)]),s([A({id:"styles"},"styles"),C("every module can have a style object attached to it."),C("magic will automagically merge all styles into one global css file."),C("in the future, it will also remove unused styles for you."),C("style merge order from lowest to highest:"),C("module.style < page.style < app.style < theme.style"),p({id:"styles-example"},"example styles"),w.View(b.style),p({id:"styles-magic-css"},"@magic/css"),C("internally, magic uses it's own css-in-js library."),C("to find out more, click the following link:"),y({to:"https://magic.github.io/css/"},"@magic/css")]),s([A({id:"globals"},"global"),C("every module can set a global object, containing state and action properties."),C("every key in the mod.global object that is set to true gets merged into the main app state/actions."),p({id:"globals-example"},"global example"),w.View(b.global)]),s([A({id:"lambdas"},"server lambdas"),C("this is the serverside magic."),C("you can define functions that will turn into serverside lambdas."),C("server side lambdas will be available for POST requests."),C("the server side function signature is (req, res) => {}, as in any nodejs http server, with the addition of req.body being set."),p({id:"lambdas-example"},"single lambda"),w.View(b.server),p({id:"lambdas-example-multi"},"multiple lambdas"),w.View(b.complexServer)]),s([A({id:"libs"},"external libs"),C(["what would javascript be without the millions of dependencies"," that you can easily install and make the average webpage "," slow[ly] (pun intended) grow towards a footprint of 5 megabytes."]),C("as the sarcastic remark might demonstrate, we think that all of that bloat is unneeded, unheeded and, frankly, not optimal."),C(["magic has one external client side dependency, ",y({to:"https://github.com/jorgebucharan/hyperapp"},"hyperapp"),", [~400 lines that provide our ui state machine]. thats it. and it won't change."]),C("anyways, rant over. if you really need to use external packages, there is a way."),C(["once there is a lib key in at least one component,"," window.LIB (browser) and global.LIB (nodejs) will be set,"," aliasing LIB as a global variable in both environments"]),p({id:"libs-dir-or-file"},"lib dir or file"),C(["if you need libraries in internally developed modules,"," it might be easier to keep your library dependencies in a central place."," to achieve this, one can simply create /assets/lib.js and export a object from it."," the keys of the object are the function name, the values are the paths to the lib.js file"]),w.View("\n// /assets/lib.js or /assets/lib/index.js\nmodule.exports = {\n  local: require.resolve('./local.js'),\n  npm: 'npm-lib',\n}"),p({id:"libs-example-file"},"example lib file"),w.View("\n// /assets/lib/local.js\nmodule.exports = name => `hello, ${name}`\n"),p({id:"libs-app"},"app.lib"),w.View("\n// /assets/app.js\nmodule.exports = {\n  // ... other app props\n  lib: {\n    local: require.resolve('./lib'),\n    npm: 'npm-lib',\n  },\n}\n"),p({id:"libs-module"},"module.lib"),C("any page or module can export a lib key"),w.View("\n// /pages/page.js\n// /assets/Module.js\n\nmodule.exports = {\n  // ... other component / page properties and views  ".concat(c(b.lib),"\n},\nView: () => div(LIB.local('name')),\n}\n\n// renders\n<div>hello, name</div>"))]),s([A({id:"full-example"},"Full example"),C("If we assemble those pieces, we get the following:"),w.View(d)])]},"/core/files/":function coreFiles(a){var b={page:"\nmodule.exports = {\n  state: {\n    variable: 'test',\n  },\n  actions: {\n    changeVar: () => ({ variable: 'changed' }),\n  },\n  style: {\n    '.cl': {\n      color: 'green',\n    },\n  },\n  View: state => div({ class: 'cl' }, [\n    'this is the page content.',\n    state.variable,\n  ]),\n}",assets:"\nmodule.exports = {\n  Custom: () => div('custom component'),\n  Pre: require('@magic-modules/pre),\n}",app:"\nmodule.exports = {\n  state: {\n    globalStateVar: 'globally available',\n  },\n  actions: {\n    globalAction: () => ({ globalStateVar: 'overwritten.' }),\n  },\n  style: {\n    'body': {\n      color: 'green',\n    },\n  },\n}",config:"\nmodule.exports = {\n  ROOT: 'example',\n  THEME: 'blue',\n  WEB_ROOT: '/core/',\n\n  // this option adds the\n  // 'X-Clacks-Overhead', 'GNU Terry Pratchet'\n  // http header\n  // see http://www.gnuterrypratchett.com/\n  FOR_DEATH_CAN_NOT_HAVE_HIM: true,\n\n  // default CLIENT_LIB_NAME, overwrite to change names of transpiled css and js files\n  CLIENT_LIB_NAME: 'magic',\n}",theme:"\nmodule.exports = {\n  'body': {\n    color: 'blue',\n  },\n}"};return[z(a.title),C("There are multiple magic files and directories."),D([B("/pages - files in the page directory map to urls in your app."),B("/assets - custom components, @magic-modules get imported here"),B("/assets/static - static files"),B("/assets/themes - theme directory, @magic-themes get imported here"),B("/assets/lib.js - imports npm and local but external packages into your app"),B("/app.js - gets merged into the app, can set state, actions, style here"),B("/config.js - custom config for your app"),B("/assets/Menu.js - custom Menu for your app")]),s([A({id:"pages"},"/pages"),C("the pages dir contains the pages of your webapp."),C(["each page has it's own state and actions, ","but also inherits the global state and actions from the app and it's dependencies"]),p({id:"pages-dir-structure"},"pages directory to url map, for the domain mag.ic:"),D([B("/pages/index.js === http://mag.ic/"),B("/pages/pageName.js === http://mag.ic/pageName/"),B("/pages/page-name.js === http://mag.ic/page-name/"),B("/pages/page_name.js === http://mag.ic/page_name/"),B("/pages/dir/index.js === http://mag.ic/dir/"),B("/pages/dir/name.js === http://mag.ic/dir/name/")]),p({id:"pages-example"},"example page:"),w.View(b.page)]),s([A({id:"assets"},"/assets"),C("the assets dir contains custom components of your app."),C("you can additionally import @magic-modules here"),p({id:"assets-example"},"example /assets/index.js"),w.View(b.assets)]),s([A({id:"static"},"/assets/static"),C("the static dir contains all of your static assets."),C("every file in this directory gets copied to the public dir."),C("image and svg files get minified using imagemin"),C(["text and binary files get compressed using the optional ",y({to:"https://github.com/jaeh/node-zopfli-es"},"node-zopfli-es")," (if it is installed)"])]),s([A({id:"themes"},"/assets/themes"),C("the themes directory contains... themes."),C("at the moment this is file based, which means you have to manually import themes there."),p({id:"themes-example"},"example theme"),w.View(b.theme)]),s([A({id:"app"},"/assets/app.js"),C("the /app.js file allows you to set global state, actions, and styles"),p({id:"app-example"},"example /app.js"),w.View(b.app)]),s([A({id:"config"},"/config.js"),C("the /config.js file allows you to set various aspects of your app"),p({id:"config-example"},"example /config.js"),w.View(b.config)]),s([A({id:"menu"},"/assets/Menu.js"),C("the /assets/Menu.js file allows you to replace the default Menu component"),p({id:"menu-example"},"example /assets/Menu.js"),y({to:"https://github.com/magic/core/blob/master/src/modules/Menu.js"},"Menu.js on github")])]},"/core/":function core(a){return[z(a.title),s([A("Welcome to the magic docs."),C("The goal of this document is to give you a rough @magical overview."),M({project:"magic/core",appveyor:"jaeh/core"}),A("Features"),p("client app"),C(["magic uses ",y({to:"https://github.com/jorgebucaran/hyperapp/"},"hyperapp")," to generate a client side webapp."]),C(["since hyperapp is awesomely small, the minimal client bundle size hovers around 3-4kb (gzipped),"," this includes all of @magic and depends on the variety of html elements in use as well as the amount and content length of the pages."]),p("static file hosting:"),C(["publishes to ",y({to:"https://github.com"},"github"),", ",y({to:"https://gitlab.com"},"gitlab")," and any other git enabled hosting service."]),p("serverless / faas"),C(["automagically generates "," serverless lambdas, derived from the ",y({to:"https://github.com/magic-modules/"},"@magic-modules")," you use in your pages."," this makes visitor statistics, user authentication and authorization, chat, and all other server side services possible."])])]},"/core/libraries/":function coreLibraries(a){return[z(a.title),p({id:"require"},"require"),L({id:"require-assets"},"require in /assets/lib/index.js"),C("if /assets/lib/index.js or /assets/lib.js exist, whatever those files export will be merged into LIB."),w.View("\n// /assets/lib/index.js or /assets/lib.js\nmodule.exports = {\n  JSON: '@magic-client/json',\n  // ./localLib resolves to /assets/lib/localLib.js\n  localLib: require.resolve('./localLib'),\n}"),L({id:"require-app"},"require in /app.js"),C("if /assets/app.js exports a lib key, app.lib will be merged into LIB"),w.View("\n// /app.js\nmodule.exports = {\n  // ... other app variables (state, actions, View etc)\n  lib: {\n    JSON: '@magic-modules/json',\n    localLib: require.resolve('./assets/lib/localLib'),\n  },\n}"),L({id:"require-page"},"require in pages or Modules"),C("if a page or Module exports a lib key, it will be merged into LIB"),w.View("\n// /pages/index.js\nmodule.exports = {\n  // ... other page variables (state, actions, View etc)\n  lib: {\n    JSON: '@magic-modules/json',\n    localLib: require.resolve('./assets/lib/localLib'),\n  },\n}"),p({id:"example"},"example"),C(["first import the library, see ",y({to:"/core/libraries/#require"},"require")]),w.View("div(['LIB.test output: ', LIB.test('magic')])"),C("renders"),s([L("LIB.test output: "),LIB.test("magic")]),s([L("LIB.exportsTesting.testing output: "),LIB.exportsTesting.testing()]),L({id:"caveat"},"caveat"),C(["all libs must either export a single object using module.expots OR using exports.key mappings. one OR the other."," when using exports.key to export, you will always get an object in LIB."," when using module.exports, structuring the LIB[name] object is up to you."])]},"/core/modules/":function coreModules(a){return[z(a.title),C("magic modules are predefined modules for webapps."),A({id:"definition"},"module definition:"),C("the minimal module is a function that returns some html."),w.View("\n// /assets/ModuleName.js\n\n// simplest module\nmodule.exports = () => div('hello, world')\n\n// complete signature\nmodule.exports = (props, children) => (state, actions) => div('hello, world')\n"),A({id:"usage"},"usage"),C("to use a module in your app it has to be imported using /assets/index.js. "),w.View("\n// /assets/index.js\nmodule.exports = {\n  // ...otherModules\n\n  // load module from /assets/Mod.js\n  Mod: require('./Mod'),\n\n  // load module from node_modules\n  NpmModule: require('@magic-modules/npm-module'),\n}"),C("after this, the module will be a global in your app and can be used like any other component."),w.View("\n// any page or module\nmodule.exports = () => div([\n  'modules that do not need props can be used without calling them as a function ',\n  Mod.View,\n  'modules that need props: ',\n  Mod.View(propObject),\n"),A({id:"custom-module"},"Mod.View and Mod.Component:"),K.View,K.Component,p("Mod sourcecode:"),w.View("const Mod = {\n  View: state =>\n    div({ class: 'Mod View' }, [\n      h3('Mod.View'),\n      p([\n        'this is Mod.View. it gets loaded from ',\n        Link({ to: 'https://github.com/magic/core/blob/master/example/assets/Mod.js' }, '/assets/Mod.js'),\n      ]),\n      p([\n        'and imported in ',\n        Link({ to: 'https://github.com/magic/core/blob/master/example/assets/index.js' }, '/assets/index.js'),\n      ]),\n      p(['the state of this module: ', JSON.stringify(state.module)]),\n    ]),\n\n  Component: () =>\n    div({ class: 'Mod Component' }, [\n      h3('Mod.Component'),\n      p([\n        'Mod.Component, a second component in ',\n        Link({ to: 'https://github.com/magic/core/blob/master/example/assets/Mod.js' }, '/assets/Mod.js'),\n      ]),\n    ]),\n\n  state: {\n    module: {\n      test: 'testing',\n    },\n  },\n\n  style: {\n    '.Mod': {\n      margin: '0 0 1em',\n      padding: '0.5em',\n      border: '1px solid',\n\n      h3: {\n        margin: 0,\n      },\n\n      '&.View': {\n        borderColor: 'green',\n      },\n      '&.Component': {\n        borderColor: 'red',\n      },\n    },\n  },\n\n  global: {\n    state: {\n      module: true,\n    },\n  },\n}\n\nmodule.exports = Mod"),A({id:"preinstalled"},"preinstalled magic modules"),C("magic has some preinstalled modules that will be used in most pages."),A({id:"app"},"app"),C("this is the main app module. it has magically inherited properties and all of it is customizable."),C(["to add actions/state/style to the app you can just create an /assets/app.js file.","the contents of this file get ",y({to:"https://github.com/magic/deep",text:"deep .merged"})," into the app"]),w.View("\n// /assets/app.js\nmodule.exports = {\n  state: {\n    merge: 'gets merged into state',\n  },\n  actions: {\n    mergedActions: () => ({ merge: 'merged action executed' }),\n  },\n  style: {\n    body: {\n      backgroundColor: 'white',\n    },\n  },\n}\n"),A({id:"menu"},"menu"),C("the Menu module provides... menus."),C(["just pass it a string which is the state key of the menu,"," then add that menu to the /assets/app.js file."]),C(["by default, the menu will only show submenu items if their parent link is active."," to force submenu items to show at all times, just pass a collapse: false prop"]),w.View("\n// assets/app.js\nmodule.exports = {\n  state: {\n    // ...state\n    menuName: [\n      { to: '/core/example-page', text: 'example page' },\n      { to: 'https://example.com', text: 'example.com' },\n      { to: 'https://example.com', nofollow: true, noreferrer: true, target: 'utopia', text: 'nofollow and noref\" },\n    ],\n  },\n  // ... rest of app.js\n}"),C("then, in a page or module"),w.View("\nmodule.exports = () => Menu.View({ name: 'menuName', collapse: false })\n\n// output:\n<nav class=\"Menu\">\n  <ul>\n    <li>\n      <a onclick=\"actions.go\" href=\"{{ WEB_ROOT }}example-page\">example page</a>\n    </li>\n    <li>\n      <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener\">example.com</a>\n    </li>\n    <li>\n      <a href=\"https://example.com\" target=\"utopia\" rel=\"noopener nofollow noreferrer\">nofollow and noref</a>\n    </li>\n  </ul>\n</nav>\n}"),p({id:"menu-props"},"Menu props"),C("the Menu module allows multiple props to be passed when instantiating the Menu"),w.View("\nMenu({\n  collapse: false, // (default: true) menu will always show all submenu items\n})"),p({id:"menu-item-props"},"Menu.Item props"),C(["every MenuItem accepts props the same props as a link does."," additionally a MenuItem accepts a items prop with sub menu items."]),w.View("\nconst menuItem = ({\n  to: '/core/url',\n  text: 'link text',\n  items: [SubMenuItems],\n  noreferrer: true, // set rel='noreferer'\n  nofollow: true, // set rel='nofollow'\n})"),p({id:"menu-sub-menus"},"sub menus"),C("to define a submenu, simply define a .items array on the menu item"),w.View("\n// assets/app.js\nmodule.exports = {\n  state: {\n    // ...state\n    menuName: [\n      {\n        to: '/core/example-page',\n        text: 'example page',\n        items: [\n          { to: '/core/example-page/#sub', text: 'example sub page' },\n      ] },\n    ],\n  },\n  // ... rest of app.js\n}"),A({id:"link"},"link"),C("the link module allows you to link to things."),w.View("\n// in any page or module View\nmodule.exports = () => [\n  Link({ to: '/core/page', text: 'page' }),\n  // output: <a href=\"/page\" onclick=\"actions.go\">page</a>\n  Link({ to: 'https://example.com', text: 'page' }),\n  // output: <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener\">page</a>\n  Link({ to: '/core/page', text: 'page', nofollow: true, noreferrer: true }),\n  // output: <a href=\"https://example.com\" target=\"_blank\" rel=\"nofollow noreferrer noopener\">page</a>\n\n  // you can also use children syntax instead of the text prop:\n  Link({ to: '/core/' }, 'home'),\n\n  // Link also supports # hash links\n  Link({ to: '/core/#hash' }, 'home with hash'),\n]"),A({id:"img"},"img"),C("the img module adds some sane default values to your images."),w.View("\n// in any page or module View\nmodule.exports = () => [\n  Img('/image.png'),\n  // output: <img src=\"/image.png\" alt=\"\" role=\"presentation\"/>\n  Img({ src: '/image.png }),\n  // output: <img src=\"/image.png\" alt=\"\" role=\"presentation\"/>\n  Img({ src: '/core/image.png', alt: 'image description' }),\n  // output: <img src=\"/image.png alt=\"image description\" />\n  Img({ src: '/core/image.png', title: 'image title', }),\n  // output: <img src=\"/image.png\" title=\"image title\" alt=\"image title\"/>\n  Img({ src: '/core/image.png', title: 'image title', alt: 'image alt' }),\n  // output: <img src=\"/image.png\" title=\"image title\" alt=\"image alt\"/>\n]"),A({id:"footer"},"footer"),C("the footer module contains a small info text and a link to the magic github repository."),C("to overwrite this behaviour, just place a Footer.js file in your assets and require it in /assets/index.js"),w.View("\n// /assets/Footer.js:\nconst Footer = {\n  style: {\n    'footer.main': {\n      position: 'relative',\n      textAlign: 'center',\n      padding: '5em 0 .5em',\n    },\n  },\n  View: () =>\n    footer({ class: 'main' }, [\n      div({ class: 'wrapper' }, [\n        'made with a few bits of ',\n        Link({ href: 'https://github.com/magic/core', target: '_blank', rel: 'noopener' }, 'magic'),\n      ]),\n    ]),\n}\n\n// /assets/index.js\nmodule.exports = {\n  // ...other assets\n  Footer: require('./Footer'),\n}\n"),A({id:"magic-modules"},"list of installable magic modules"),D([B([p("pre"),s("the pre magic module allows you to display javascript code with syntax highlighting. it is used throughout this documentation."),y({to:"https://github.com/magic-modules/pre"},"@magic-modules/pre")])])]},"/core/themes/":function coreThemes(a){return[z(a.title),C("magic themes are themes for magic apps. you decide which theme to load by specifying the theme name in config.THEME"),w.View("\n// /config.js\nmodule.exports = {\n  // ...rest of config,\n  THEME: 'blue',\n}\n"),A("theme load order"),C("themes get loaded from multiple places. last in the list overwrites earlier entries."),C("/node_modules/@magic/core/src/themes/${config.THEME}/index.js"),C("/node_modules/@magic-themes/${config.THEME}"),C("/assets/themes/${config.THEME}/index.js"),A("list of magic themes"),D([B([y({to:"https://github.com/magic-themes"},"none yet, coming soon.")])])]},"/404/":function _(){return s("404 - not found")}};var U={"url":"/core/","root":"/core/","app":{"title":"Custom App Title","description":"Custom App Description"},"menu":[{to:"/core/concepts/","text":"concepts","items":[{to:"/core/concepts/#philosophy","text":"philosophy"},{to:"/core/concepts/#modules","text":"modules"},{to:"/core/concepts/#state","text":"state","items":[{to:"/core/concepts/#state-example","text":"example state"}]},{to:"/core/concepts/#actions","text":"actions","items":[{to:"/core/concepts/#actions-example","text":"example actions"}]},{to:"/core/concepts/#views","text":"views","items":[{to:"/core/concepts/#views-example","text":"example view"}]},{to:"/core/concepts/#styles","text":"styles","items":[{to:"/core/concepts/#styles-example","text":"example styles"},{to:"/core/concepts/#styles-magic-css","text":"@magic/css"}]},{to:"/core/concepts/#globals","text":"global","items":[{to:"/core/concepts/#globals-example","text":"example global"}]},{to:"/core/concepts/#lambdas","text":"server lambdas","items":[{to:"/core/concepts/#lambdas-example","text":"single lambda"},{to:"/core/concepts/#lambdas-example-multi","text":"multiple lambdas"}]},{to:"/core/concepts/#libs","text":"external libs","items":[{to:"/core/concepts/#libs-dir-or-file","text":"lib dir or file"},{to:"/core/concepts/#libs-example-file","text":"example lib file"},{to:"/core/concepts/#libs-app","text":"app.lib"},{to:"/core/concepts/#libs-module","text":"module.lib"}]},{to:"/core/concepts/#full-example","text":"example"}]},{to:"/core/files/","text":"files & directories","items":[{to:"/core/files/#pages","text":"/pages","items":[{to:"/core/files/#pages-dir-structure","text":"url mapping"},{to:"/core/files/#pages-example","text":"example"}]},{to:"/core/files/#assets","text":"/assets","items":[{to:"/core/files/#assets-example","text":"example"}]},{to:"/core/files/#static","text":"/assets/static"},{to:"/core/files/#themes","text":"/assets/themes","items":[{to:"/core/files/#themes-example","text":"example"}]},{to:"/core/files/#app","text":"/assets/app.js","items":[{to:"/core/files/#app-example","text":"example"}]},{to:"/core/files/#config","text":"/config.js","items":[{to:"/core/files/#config-example","text":"example"}]},{to:"/core/files/#menu","text":"/assets/Menu.js","items":[{to:"/core/files/#menu-example","text":"example"}]}]},{to:"/core/modules/","text":"modules","items":[{to:"/core/modules/#definition","text":"definition"},{to:"/core/modules/#usage","text":"usage"},{to:"/core/modules/#custom-module","text":"custom modules"},{to:"/core/modules/#preinstalled","text":"preinstalled"},{to:"/core/modules/#menu","text":"menu","items":[{to:"/core/modules/#menu-props","text":"props"},{to:"/core/modules/#menu-sub-menus","text":"sub menus"}]},{to:"/core/modules/#link","text":"link"},{to:"/core/modules/#footer","text":"footer"},{to:"/core/modules/#magic-modules","text":"@magic-modules"}]},{to:"/core/themes/","text":"themes"},{to:"/core/libraries/","text":"libraries","items":[{to:"/core/libraries/#require","text":"require from"},{to:"/core/libraries/#require-assets","text":"/assets/lib.js"},{to:"/core/libraries/#require-app","text":"/app.js"},{to:"/core/libraries/#require-page","text":"modules / pages"},{to:"/core/libraries/#example","text":"example"},{to:"/core/libraries/#caveat","text":"caveat"}]}],logo:"/core/logo.png","logotext":"@magic","pages":{"/core/concepts/":{"title":"@magic/core concepts","description":"@magic/core conceptual information."},"/core/files/":{"title":"@magic/core files","description":"@magic/core directory docs."},"/core/":{"title":"@magic/core docs","description":"@magic/core documentation directory."},"/core/libraries/":{"title":"@magic/core library docs","description":"@magic/core libraries allow you to include client side functionality in your app."},"/core/modules/":{"title":"@magic-modules","description":"@magic-modules documentation."},"/core/themes/":{"title":"@magic-themes","description":"@magic-theme docs."}},"pre":{"theme":"light"},"module":{"test":"testing"}};U.url=window.location.pathname,U.root="/core/";var V={"pre":{"changeTheme":function changeTheme(){return function(a){return{theme:a.theme==="dark"?"light":"dark"}}},"clip":function clip(a){if(typeof document!=="undefined"&&typeof document.execCommand==="function"){var b=document.createElement("textarea");b.id="copy",b.innerHTML=a,document.body.appendChild(b);var c=document.getElementById("copy");c.select(),document.execCommand("copy"),document.body.removeChild(c)}}},"go":function go(a){return function(b){if(typeof window==="undefined"||!window.history)return!0;var c=a.to;var d=a.e?a.e:a;d.preventDefault();var e=b.url;var f=e.split("#"),g=j(f,2),h=g[0],i=g[1],k=i===void 0?"":i;if(c){e=c.replace(window.location.origin,"");var l=e.split("#"),m=j(l,2),n=m[0],o=m[1],p=o===void 0?"":o;h=n,k=p;var q=b.hash?"#".concat(b.hash):"";var r=b.url+q;e!==r&&(window.history&&window.history.pushState({uri:h},"",e),!k&&window.scrollTo(0,0))}else h=d.state?d.state.uri:"/";return k&&window.location&&(window.location.hash=k),{url:h,hash:k,prev:b.url}}}};var W=function view(a,b){var c=T[a.url]?a.url:"/404/";var d=T[c];if(a.pages){var e=a.pages[c];for(var f in e)a[f]=e[f]}if(b.pages){var g=b.pages[c];for(var h in g)b[h]=g[h]}return s({"class":"wrapper",oncreate:function oncreate(){typeof window!=="undefined"&&b.go&&window.addEventListener("popstate",b.go)}},[R,d?s({"class":"page"},d(a,b)):s({"class":"page"},"404 - not found"),P.View])};var X=document;var d=X.getElementById("magic");!d&&(d=X.createElement("div"),d.id="magic",X.body.appendChild(d)),q(U,V,W,d);
},{"hyperapp":2}],2:[function(require,module,exports){
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.hyperapp={})}(this,function(e){"use strict";e.h=function(e,n){for(var t=[],r=[],o=arguments.length;2<o--;)t.push(arguments[o]);for(;t.length;){var l=t.pop();if(l&&l.pop)for(o=l.length;o--;)t.push(l[o]);else null!=l&&!0!==l&&!1!==l&&r.push(l)}return"function"==typeof e?e(n||{},r):{nodeName:e,attributes:n||{},children:r,key:n&&n.key}},e.app=function(e,n,t,r){var o,l=[].map,u=r&&r.children[0]||null,i=u&&function n(e){return{nodeName:e.nodeName.toLowerCase(),attributes:{},children:l.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:n(e)})}}(u),f=[],m=!0,a=v(e),c=function e(r,o,l){for(var n in l)"function"==typeof l[n]?function(e,t){l[e]=function(e){var n=t(e);return"function"==typeof n&&(n=n(h(r,a),l)),n&&n!==(o=h(r,a))&&!n.then&&d(a=p(r,v(o,n),a)),n}}(n,l[n]):e(r.concat(n),o[n]=v(o[n]),l[n]=v(l[n]));return l}([],a,v(n));return d(),c;function g(e){return"function"==typeof e?g(e(a,c)):null!=e?e:""}function s(){o=!o;var e=g(t);for(r&&!o&&(u=function e(n,t,r,o,l){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var u=k(o,l);n.insertBefore(u,t),null!=r&&T(n,t,r),t=u}else if(null==r.nodeName)t.nodeValue=o;else{x(t,r.attributes,o.attributes,l=l||"svg"===o.nodeName);for(var i={},f={},a=[],c=r.children,s=o.children,d=0;d<c.length;d++){a[d]=t.childNodes[d];var v=N(c[d]);null!=v&&(i[v]=[a[d],c[d]])}for(var d=0,p=0;p<s.length;){var v=N(c[d]),h=N(s[p]=g(s[p]));if(f[v])d++;else if(null==h||h!==N(c[d+1]))if(null==h||m)null==v&&(e(t,a[d],c[d],s[p],l),p++),d++;else{var y=i[h]||[];v===h?(e(t,y[0],y[1],s[p],l),d++):y[0]?e(t,t.insertBefore(y[0],a[d]),y[1],s[p],l):e(t,a[d],null,s[p],l),f[h]=s[p],p++}else null==v&&T(t,a[d],c[d]),d++}for(;d<c.length;)null==N(c[d])&&T(t,a[d],c[d]),d++;for(var d in i)f[d]||T(t,i[d][0],i[d][1])}return t}(r,u,i,i=e)),m=!1;f.length;)f.pop()()}function d(){o||(o=!0,setTimeout(s))}function v(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t}function p(e,n,t){var r={};return e.length?(r[e[0]]=1<e.length?p(e.slice(1),n,t[e[0]]):n,v(t,r)):n}function h(e,n){for(var t=0;t<e.length;)n=n[e[t++]];return n}function N(e){return e?e.key:null}function y(e){return e.currentTarget.events[e.type](e)}function b(e,n,t,r,o){if("key"===n);else if("style"===n)if("string"==typeof t)e.style.cssText=t;else for(var l in"string"==typeof r&&(r=e.style.cssText=""),v(r,t)){var u=null==t||null==t[l]?"":t[l];"-"===l[0]?e.style.setProperty(l,u):e.style[l]=u}else"o"===n[0]&&"n"===n[1]?(n=n.slice(2),e.events?r||(r=e.events[n]):e.events={},(e.events[n]=t)?r||e.addEventListener(n,y):e.removeEventListener(n,y)):n in e&&"list"!==n&&"type"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!o?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n)}function k(e,n){var t="string"==typeof e||"number"==typeof e?document.createTextNode(e):(n=n||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),r=e.attributes;if(r){r.oncreate&&f.push(function(){r.oncreate(t)});for(var o=0;o<e.children.length;o++)t.appendChild(k(e.children[o]=g(e.children[o]),n));for(var l in r)b(t,l,r[l],null,n)}return t}function x(e,n,t,r){for(var o in v(n,t))t[o]!==("value"===o||"checked"===o?e[o]:n[o])&&b(e,o,t[o],n[o],r);var l=m?t.oncreate:t.onupdate;l&&f.push(function(){l(e,n)})}function T(e,n,t){function r(){e.removeChild(function e(n,t){var r=t.attributes;if(r){for(var o=0;o<t.children.length;o++)e(n.childNodes[o],t.children[o]);r.ondestroy&&r.ondestroy(n)}return n}(n,t))}var o=t.attributes&&t.attributes.onremove;o?o(n,r):r()}}});

},{}]},{},[1]);
