"use strict";function b(a){return l(a)||c(a)||j()}function c(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function d(a,b){if(null==a)return{};var c,d,f=e(a,b);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(d=0;d<g.length;d++)c=g[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(f[c]=a[c])}return f}function e(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}function f(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a,b){return l(a)||k(a,b)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function k(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function l(a){if(Array.isArray(a))return a}function m(a){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},m(a)}var n=function(){var a=2,b=3,c={},d=[],e=d.map,f=Array.isArray,g="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame,i="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):g,j=function(a){var b="";if("string"==typeof a)return a;if(f(a)&&0<a.length)for(var c,d=0;d<a.length;d++)""!==(c=j(a[d]))&&(b+=(b&&" ")+c);else for(var d in a)a[d]&&(b+=(b&&" ")+d);return b},l=function(c,a){var b={};for(var d in c)b[d]=c[d];for(var d in a)b[d]=a[d];return b},n=function(a){return a.reduce(function(a,b){return a.concat(b&&!0!==b?"function"==typeof b[0]?[b]:n(b):0)},d)},o=function(c,a){return f(c)&&f(a)&&c[0]===a[0]&&"function"==typeof c[0]},p=function(c,a){if(c!==a)for(var b in l(c,a)){if(c[b]!==a[b]&&!o(c[b],a[b]))return!0;a[b]=c[b]}},q=function(a,b,c){for(var d,e,f=0,g=[];f<a.length||f<b.length;f++)d=a[f],e=b[f],g.push(e?!d||e[0]!==d[0]||p(e[1],d[1])?[e[0],e[1],e[0](c,e[1]),d&&d[2]()]:d:d&&d[2]());return g},r=function(a,b,c,d,e,f){if("key"===b);else if("style"===b)for(var g in l(c,d))c=null==d||null==d[g]?"":d[g],"-"===g[0]?a[b].setProperty(g,c):a[b][g]=c;else"o"===b[0]&&"n"===b[1]?((a.actions||(a.actions={}))[b=b.slice(2).toLowerCase()]=d)?!c&&a.addEventListener(b,e):a.removeEventListener(b,e):!f&&"list"!==b&&b in a?a[b]=null==d?"":d:null!=d&&!1!==d&&("class"!==b||(d=j(d)))?a.setAttribute(b,d):a.removeAttribute(b)},s=function(a,c,d){var e=a.type===b?document.createTextNode(a.name):(d=d||"svg"===a.name)?document.createElementNS("http://www.w3.org/2000/svg",a.name):document.createElement(a.name),f=a.props;for(var g in f)r(e,g,null,f[g],c,d);for(var h=0,j=a.children.length;h<j;h++)e.appendChild(s(a.children[h]=w(a.children[h]),c,d));return a.node=e},t=function(a){return null==a?null:a.key},u=function(a,c,d,e,f,g){if(d===e);else if(null!=d&&d.type===b&&e.type===b)d.name!==e.name&&(c.nodeValue=e.name);else if(null==d||d.name!==e.name)c=a.insertBefore(s(e=w(e),f,g),c),null!=d&&a.removeChild(d.node);else{var h,j,k,m,n=d.props,o=e.props,p=d.children,q=e.children,v=0,x=0,y=p.length-1,z=q.length-1;for(var A in g=g||"svg"===e.name,l(n,o))("value"===A||"selected"===A||"checked"===A?c[A]:n[A])!==o[A]&&r(c,A,n[A],o[A],f,g);for(;x<=z&&v<=y&&null!=(k=t(p[v]))&&k===t(q[x]);)u(c,p[v].node,p[v],q[x]=w(q[x++],p[v++]),f,g);for(;x<=z&&v<=y&&null!=(k=t(p[y]))&&k===t(q[z]);)u(c,p[y].node,p[y],q[z]=w(q[z--],p[y--]),f,g);if(v>y)for(;x<=z;)c.insertBefore(s(q[x]=w(q[x++]),f,g),(j=p[v])&&j.node);else if(x>z)for(;v<=y;)c.removeChild(p[v++].node);else{for(var A=v,B={},C={};A<=y;A++)null!=(k=p[A].key)&&(B[k]=p[A]);for(;x<=z;){if(k=t(j=p[v]),m=t(q[x]=w(q[x],j)),C[k]||null!=m&&m===t(p[v+1])){null==k&&c.removeChild(j.node),v++;continue}null==m||1===d.type?(null==k&&(u(c,j&&j.node,j,q[x],f,g),x++),v++):(k===m?(u(c,j.node,j,q[x],f,g),C[m]=!0,v++):null==(h=B[m])?u(c,j&&j.node,null,q[x],f,g):(u(c,c.insertBefore(h.node,j&&j.node),h,q[x],f,g),C[m]=!0),x++)}for(;v<=y;)null==t(j=p[v++])&&c.removeChild(j.node);for(var A in B)null==C[A]&&c.removeChild(B[A].node)}}return e.node=c},v=function(c,a){for(var b in c)if(c[b]!==a[b])return!0;for(var b in a)if(c[b]!==a[b])return!0},w=function(b,c){return b.type===a?((!c||v(c.lazy,b.lazy))&&((c=b.lazy.view(b.lazy)).lazy=b.lazy),c):b},x=function(a,b,c,d,e,f){return{name:a,props:b,children:c,node:d,type:f,key:e}},y=function(a,e){return x(a,c,d,e,null,b)},z=function(a){return a.nodeType===b?y(a.nodeValue,a):x(a.nodeName.toLowerCase(),c,e.call(a.childNodes,z),a,null,1)},A=function(a,b){for(var d,e=[],g=[],h=arguments.length;2<h--;)e.push(arguments[h]);for(;0<e.length;)if(f(d=e.pop()))for(var h=d.length;0<h--;)e.push(d[h]);else if(!1===d||!0===d||null==d);else g.push("object"===m(d)?d:y(d));return b=b||c,"function"==typeof a?a(b,g):x(a,b,g,null,b.key)};return{h:A,app:function app(a,b){var c={},d=!1,e=a.view,h=a.node,j=h&&z(h),k=a.subscriptions,l=[],m=function(a){p(this.actions[a.type],a)},o=function(a){return c!==a&&(k&&i(r),e&&!d&&g(s,d=!0)),c=a},p=(b||function(a){return a})(function(a,b,d){return"function"==typeof a?p(a(c,b),d||b):f(a)?"function"==typeof a[0]?p(a[0],"function"==typeof(a=a[1])?a(b):a,b):(n(a.slice(1)).map(function(a){a&&a[0](p,a[1],b)},o(a[0])),c):o(a)}),r=function(){l=q(l,n([k(c)]),p)},s=function(){d=!1,h=u(h.parentNode,h,j,j="string"==typeof(j=e(c))?y(j):j,m)};p(a.init)}}}(),o=n.h,h=n.app,q=function(a){return function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],e=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.some(function(b){return b===m(a)})};return d||(e(b,"string","number","function")||Array.isArray(b)?(d=b,b={}):e(b.View,"function")&&(d=b.View,b={})),o(a,b,d)}},r=q("a"),a=q("button"),s=q("code"),t=q("div"),u=q("footer"),v=q("h1"),w=q("h2"),x=q("h3"),y=q("h5"),z=q("header"),A=q("img"),B=q("li"),C=q("main"),D=q("nav"),E=q("p"),p=q("pre"),F=q("span"),G=q("ul"),H={app:{description:"Custom App Description",title:"Custom App Title"},logo:"/core/logo.png",logotext:"@magic",menu:[{items:[{text:"modules",to:"/concepts/#modules"},{text:"state",to:"#state"},{text:"actions",to:"#actions"},{text:"views",to:"#views"},{text:"styles",to:"#styles"},{text:"global",to:"#globals"},{text:"server lambdas",to:"#lambdas"},{text:"external libs",to:"#libs"}],text:"concepts",to:"/concepts/"},{items:[{items:[{text:"url mapping",to:"-dir-structure"},{text:"example",to:"-example"}],text:"/pages",to:"#pages"},{items:[{text:"example",to:"-example"}],text:"/assets",to:"#assets"},{text:"/assets/static",to:"/files/#static"},{items:[{text:"example",to:"-example"}],text:"/assets/themes",to:"#themes"},{items:[{text:"example",to:"-example"}],text:"/assets/app.js",to:"#app"},{items:[{text:"example",to:"-example"}],text:"/config.js",to:"#config"},{items:[{text:"example",to:"-example"}],text:"/assets/Menu.js",to:"#menu"}],text:"files & directories",to:"/files/"},{items:[{text:"definition",to:"#definition"},{text:"usage",to:"#usage"},{text:"custom modules",to:"#custom-module"},{text:"preinstalled",to:"#preinstalled"},{items:[{text:"props",to:"-props"},{text:"sub menus",to:"-sub-menus"}],text:"menu",to:"#menu"},{text:"link",to:"#link"},{text:"footer",to:"#footer"},{text:"@magic-modules",to:"#gl-magic-modules"}],text:"modules",to:"/modules/"},{items:[{text:"@magic-themes",to:"#gl-magic-themes"}],text:"themes",to:"/themes/"},{items:[{text:"@magic-libraries",to:"#gl-magic-libraries"}],text:"libraries",to:"/libraries/"}],module:{test:"testing"},pageClass:{},pages:{"/core/":{description:"@magic/core documentation directory.",title:"@magic/core docs"},"/core/concepts/":{description:"@magic/core conceptual information.",title:"@magic/core concepts"},"/core/files/":{description:"@magic/core directory docs.",title:"@magic/core files"},"/core/libraries/":{description:"@magic/core libraries allow you to include client side functionality in your app.",title:"@magic/core library docs"},"/core/modules/":{description:"@magic-modules documentation.",title:"@magic-modules"},"/core/themes/":{description:"@magic-theme docs.",title:"@magic-themes"}},root:"/core/",theme:"dark",url:"/core/"},I={listenPopState:function listenPopState(a,b){var c=function(c){return a(b,c)};return addEventListener("popstate",c),function(){return removeEventListener("popstate",c)}},mapClickToGo:function mapClickToGo(a){return a.preventDefault(),a}},J=function(){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];return u({class:"Footer"},[t({class:"Container"},[a,t({class:"Credits"},["made with a few bits of ",Q({to:"https://github.com/magic/core",target:"_blank",rel:"noopener"},"magic")])])])},K=function(a){if("string"==typeof a)a={project:a};else if(!a.project)return;var b=a,c=b.project,d=void 0!==c&&c,e=b.branch,f=void 0===e?"master":e,g=b.host,h=void 0===g?"github":g,j=[["npm",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d;return a&&{to:"https://www.npmjs.com/package/@".concat(a),src:"https://img.shields.io/npm/v/@".concat(a,".svg")}}],["travis",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d;return a&&{to:"https://travis-ci.com/".concat(a),src:"https://travis-ci.com/".concat(a,".svg?branch=").concat(f)}}],["appveyor",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d;if(a){var b=a.split("/"),c=i(b,2),e=c[0],g=c[1];return e=e.replace(/-/g,""),{to:"https://ci.appveyor.com/project/".concat(e,"/").concat(g,"/branch/").concat(f),src:"https://img.shields.io/appveyor/ci/".concat(e,"/").concat(g,"/").concat(f,".svg")}}}],["coveralls",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d;return{to:"https://coveralls.io/".concat(h,"/").concat(a),src:"https://img.shields.io/coveralls/".concat(h,"/").concat(a,"/").concat(f,".svg")}}],["greenkeeper",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d;return a&&{to:"https://greenkeeper.io",src:"https://badges.greenkeeper.io/".concat(a,".svg")}}],["snyk",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d;return a&&{to:"https://snyk.io/test/".concat(h,"/").concat(a),src:"https://img.shields.io/snyk/vulnerabilities/github/".concat(a,".svg")}}]].map(function(b){var c=i(b,2),d=c[0],e=c[1];return e(a[d])}).filter(function(b){return b.to&&b.src});return j.length?G({class:"GitBadges"},j.map(function(a){var b=a.to,c=a.src;return B([Q({to:b},N({src:c}))])})):void 0},L=function(a){var b=a.items,c=void 0===b?[]:b,d=a.org,e=a.host,g=void 0===e?"github":e,h=a.header,i=a.desc,j=void 0===i?a.description:i,k={};return a["class"]?!a["class"].includes("GitList")&&(k["class"]="GitList ".concat(a["class"])):k["class"]="GitList",k.id=a.id?a.id:d,k.id.startsWith("gl")||(k.id="gl-".concat(k.id)),t(k,[h&&w(h),j&&t({class:"description"},j),G({id:"".concat(k.id,"-ul")},[c.map(function(a){return L.Item(f({org:d,id:"".concat(k.id,"-li"),host:g},a))})])])};L.Item=function(a){var b=a.name,c=a.org,d=a.id,e=a.host,f=a.desc||a.description;return B({id:"".concat(d,"-").concat(b),class:"GitListItem"},[x([Q({to:"https://".concat(e,".com/").concat(c,"/").concat(b)},"@".concat(c,"/").concat(b))]),f&&E(f),K("".concat(c,"/").concat(b)),Q({to:"https://".concat(c,".").concat(e,".io/").concat(b)},"docs / demo")])};var M=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],c=a.logo,e=a.menu,f=a.tagline,g=a.logotext,h=d(a,["logo","menu","tagline","logotext"]);return c||e||f?z({class:"Header"},[(c||g)&&Q({to:h.root,class:"Logo"},[c&&N(c),g&&F(g)]),e&&R({state:h,items:e}),b]):void 0},N=function(a){if("string"==typeof a&&(a={src:a}),!!a.src)return a.alt||(a.title?a.alt=a.title:(a.role="presentation",a.alt="")),A(a)},O=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return L(f({org:"magic-libraries",header:[Q({to:"https://magic-libraries.github.io"},"@magic-libraries")],desc:["below is a collection of the available @magic client libraries."],items:[{name:"json",description:["the @magic-libraries/json module parses and stringifies json."," it also returns errors instead of throwing them."]},{name:"is",description:"the @magic-libraries/is module unifies the javascript type testing apis."},{name:"uri",description:["the @magic-libraries/uri module "," encodes objects to uri strings and decodes uri strings to objects."]}]},a))},P=function(){0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return a({class:"LightSwitch",onclick:$.changeTheme})},Q=function(a,b){var c=a.to,e=d(a,["to"]),f=e.href,g=e.text,h=e.nofollow,i=e.noreferrer,j=e.onclick,k=d(e,["href","text","nofollow","noreferrer","onclick"]);c=c||f||"",k.href=c;var l=c.startsWith("/");return l?k.onclick=[$.go,I.mapClickToGo]:(k.target="_blank",k.rel="noopener",h&&(k.rel+=" nofollow"),i&&(k.rel+=" noreferrer")),r(k,[g,b])},R=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.items,c=a["class"],d=void 0===c?"Menu":c,e=a.collapse,g=a.state;if(b.length)return g.hash&&(g.url+="#".concat(g.hash)),D({className:d},G(b.map(function(a){return S(f({},a,{state:g,collapse:void 0===e||e}))})))},S=function(a){var b=a.text,c=a.items,e=void 0===c?[]:c,g=a.state,h=a.parentTo,i=void 0===h?void 0:h,j=a.collapse,k=d(a,["text","items","state","parentTo","collapse"]),l=g.url,m=g.root;if(k.to||b){var n={class:{}},o=k.to;o.startsWith("/#")&&(o=o.substr(1));var p=k.to[0],q="/"===p||"-"===p||"#"===p;if(i&&q)if("-"===p)o=i+o;else if("#"===p)o=i+o;else{var u=o.split("/")[1];if(u){var v=i.endsWith("/".concat(u,"/"));!v&&q&&(o=i+o)}}var r=o.startsWith(m);m&&q&&!r&&(o=m+o),k.to=o.replace(/\/\//g,"/");var s=l&&l.includes(k.to);l.endsWith(k.to)&&(n["class"].active=!0);var t=[];return(e.length&&s||!j)&&(t=G(e.map(function(a){return S(f({parentTo:k.to,state:g,collapse:j},a))}))),B(n,[k.to?Q(k,b):F(k,b),t])}},T=function(a){return t({class:"Mod"},[x("Mod.Mod"),E(["this is Mod. it gets loaded from ",Q({to:"https://github.com/magic/core/example/assets/module.js"},"/assets/module.js")]),E(["and imported in ",Q({to:"https://github.com/magic/core/example/assets/index.js"},"/assets/index.js")]),E(["the state of this module: ",JSON.stringify(a.module)])])};T.Component=function(a){a="string"==typeof a?{header:a}:a;var b=a.header||a.title;return t({class:"ModComponent"},[b&&y(b),E(["Mod.Component, a second component in ",Q({to:"https://github.com/magic/core/example/assets/module.mjs"},"/assets/module.mjs")])])};var U=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return L(f({class:"ModuleList",org:"magic-modules",header:[Q({to:"https://magic-modules/github.io"},"@magic-modules")],description:["modules are the grimoires of ",Q({to:"https://magic.github.io/core"},"@magic")],items:[{name:"language-switch",description:"LanguageSwitch provides file hierarchy based multilanguage support for magic."},{name:"video-embed",description:["VideoEmbed embeds videos from any video hoster using iframes. "," comes with default support for vimeo and youtube."]},{name:"sound-cloud",description:"embed soundcloud track, playlist and user widgets"},{name:"module-list",description:"ModuleList shows the list of @magic-modules you are looking at."},{name:"theme-list",description:"ThemeList shows a list of all @magic-themes."},{name:"library-list",description:"LibraryList shows a list of all @magic-libraries libraries."},{name:"pre",description:"Pre allows you to display javascript code with syntax highlighting."},{name:"git-badges",description:"GitBadges shows a list of github repository status badges."},{name:"git-list",description:"show a list of git repositories like the one you are looking at."}]},a))},V=function(a){var b=a.page,c=a.state;b=b?b(c):"404 - not found";var d={id:"Magic",class:c.pageClass};return C(d,t({class:{Wrapper:!0}},X({state:c,page:b})))},W=function(b){"string"==typeof b&&(b={content:b});var c=b,d=c.content;return t({class:"Pre"},[t({class:"menu"},[a({onclick:[$.pre.clip,function(a){return{e:a,content:d}}]},"copy")]),p(Z.pre.format(d))])},X=function(a){var b=a.page,c=a.state;return[M(c),t({class:"Page"},b),J(c)]},Y=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return L(f({org:"magic-themes",header:[Q({to:"https://magic-themes.github.io"},"@magic-themes")],desc:["below is a collection of the available @magic app themes."],items:[{name:"docs",description:"the @magic documentation theme. used in all @magic docs."}]},a))},Z={pre:function(){var a="\nlet this long package float\ngoto private class if short\nwhile protected with debugger case\ncontinue volatile interface\n\ninstanceof super synchronized throw\nextends final throws\ntry import double enum\n\nboolean abstract function\nimplements typeof transient break\ndefault do static void\n\nint new async native switch\nelse delete null public var\nawait byte finally catch\nin return for get const char\nmodule exports require\n".trim().split(/\b/g).map(function(a){return a.trim()}),c="\nArray Object String Number RegExp Null Symbol\nSet WeakSet Map WeakMap\nsetInterval setTimeout\nPromise\nJSON\nInt8Array Uint8Array Uint8ClampedArray\nInt16Array Uint16Array\nInt32Array Uint32Array\nFloat32Array Float64Array\n".trim().split(/\b/g).map(function(a){return a.trim()}),d=["true","false"],e=function(b){if("string"!=typeof b)return b;var e=b.split(/\b/);return b=e.map(function(b,f){if(""!==b){var g="";return"state"===b?g="state":"actions"===b?g="actions":e[f+1]&&e[f+1].includes(":")?g="colon":a.includes(b)?g="keyword":c.includes(b)?g="builtin":d.includes(b)?g="boolean":"."===e[f-1]?g="property":"."===e[f+1]&&(g="object"),g&&(b=F({class:g},b)),b}}),b},f=/([a-zA-Z0-9:+._-]+@[a-zA-Z0-9._-]+)/g,g=function(a){return a.split(f).map(function(a){if(f.test(a)){var b=a.startsWith("mailto:")?a:"mailto:".concat(a),c=a.replace("mailto:","");return Q({class:"email",to:b},c)}return e(a)})},h=function(a,b){return[l(a.substring(0,b)),l(a.substring(b))]},i=function(a){return a.split(/(?= )/).map(function(a){return a.includes("://")?Q({to:a},a):l(a)})},j=function(a){return a.includes("://")&&!a.includes("@")?i(a):g(a)},k=function(a){var c=a.replace(/"/g,"'"),d=c.split("'"),f=b(d),g=f[0],h=f[1],i=f.slice(2),k=i;1===k.length?k=l(k[0]):1<k.length&&(k=l(k.join("'")));var m=[];return m="undefined"==typeof h?e(a):[e(g),F({class:"string"},["'",j(h),"'"]),k],m},l=function(a){var b=a.indexOf("//"),c=a.trim();if(c.startsWith("//")){for(var d=a.search(/\S|$/),e="",f=0;f<d;f++)e+=" ";return c.startsWith("// ")||(a="".concat(e,"// ").concat(c.substr(2))),F({class:"comment"},[e,"// ",l(c.substring(3))])}return-1<b&&":"!==a[b-1]?h(a,b):2<a.indexOf("://")?i(a):a.indexOf("@")&&a.includes(".")&&!a.trim().includes(" ")?g(a):k(a)},m=function(a){return s({class:"line"},l(a))};return{format:function format(a){return a.trim().split("\n").map(m)}}}()},$={changeTheme:function changeTheme(a){return f({},a,{pageClass:f({},a.pageClass,{light:"dark"===a.theme}),theme:"dark"===a.theme?"light":"dark"})},go:function go(a,b){var c=b.currentTarget.href.replace(window.location.origin,""),d=c.split("#"),e=i(d,2),g=e[0],h=e[1],j=void 0===h?"":h;if(g===a.url&&j===a.hash)return a;if(window.history.pushState({url:g,hash:j},"",c),j){var k=document.getElementById(j);k&&window.scrollTo(0,k.scrollTop),window.location.hash=j}else window.scrollTo(0,0);return f({},a,{url:g,hash:j,prev:a.url})},pop:function pop(a,b){var c=window.location,d=c.pathname,e=c.hash;return e=e.substring(1),b.state&&(d=b.state.url,e=b.state.hash),e?window.location.hash=e:window.scrollTo(0,0),f({},a,{url:d,hash:e})},pre:{clip:function clip(a,b){var c=b.content;if("undefined"!=typeof document&&"function"==typeof document.execCommand){var d=document.createElement("textarea");d.id="copy",d.innerHTML=c,document.body.appendChild(d);var e=document.getElementById("copy");e.select(),document.execCommand("copy"),document.body.removeChild(e)}return a}}},_={"/core/":function core(a){return[v(a.title),t([w("welcome to the magic docs."),E("the goal of this document is to give you a rough @magical overview."),K("magic/core"),w({id:"philosophy"},"philosophy"),E(["@magic aims to make it easy to stitch together any kind of webapp."," by providing simple, well documented and self contained modules,"," @magic makes it possible to create stunningly fast webpages."]),w({id:"privacy"},"privacy"),E(["@magic does not spy on it's users."," we not only try to be legally compliant,"," but additionally to be ethical and do the right thing for your users."]),w({id:"buzzwords"},"why should i use magic?"),x("@magic is tiny"),E(["~4 kb javascript boilerplate."," usually, all the javascript in your homepage will be 30-60kb big (after unpacking),"," 10-30kb get transmitted from the server to the client."," this complete documentation page you are reading with all sub pages loads about 50kb of unpacked,"," 15kb of gzipped javascript. (values may be out of date and depend on cdn settings)"]),x("@magic works without javascript"),E(["most of the functionality works without javascript,"," buttons and realtime user interactions obviously won't."]),x("@magic generates static pages"),E(["this makes free hosting (using github or gitlab pages) possible."," and it's easy."]),E(["@magic publishes to ",Q({to:"https://github.com"},"github"),", ",Q({to:"https://gitlab.com"},"gitlab")," and any other git-pages enabled hosting service."]),x("serverless / faas"),E(["automagically generates "," serverless lambdas, derived from the ",Q({to:"https://github.com/magic-modules/"},"@magic-modules")," you use in your pages."," this makes visitor statistics, user authentication and authorization, chat, and all other server side services possible."])]),P(a)]},"/core/404/":function core404(){return t("404 - not found")},"/core/concepts/":function coreConcepts(a){return[v(a.title),E("magic concepts. These are the building blocks of every module in a magic app"),t([w({id:"modules"},"@magic-modules"),E("modules are the main building block of magic."),E(["a page is a module, a button is a module, a link is a module, an image is a module."," a @magic app contains modules containing modules that contain modules."," this can lead to inception."])]),t([w({id:"state"},"state"),t([E("state is a javascript object."),E("state can be mutated by actions or effects."),E("every rendering step, the state determines the output of the view")])]),t([w({id:"actions"},"actions"),E("actions are an object containing functions"),E("those functions get the state and their props and may return a new full, but changed, state.")]),t([w({id:"effects"},"effects"),E("effects are an object containing functions, just like actions."),E("they behave like actions, get a state and props and may return a new full, but changed, state."),E("alternatively, you can call any action from within any other action.")]),t([w({id:"views"},"views"),E("views render the state to html"),E("whenever an action triggers a statechange, this statechange then triggers a view change.")]),t([w({id:"styles"},"styles"),E("every module can have a style object attached to it."),E("magic will automagically merge all styles into one global css file."),E("in the future, it will also remove unused styles for you."),E("style merge order from lowest to highest:"),E("module.style < page.style < app.style < theme.style"),x({id:"styles-magic-css"},"@magic/css"),E("internally, magic uses it's own css-in-js library."),E("to find out more, click the following link:"),Q({to:"https://magic.github.io/css/"},"@magic/css")]),t([w({id:"globals"},"global"),E("every module can set a global object, containing state and action properties."),E("every key in the mod.global object that is set to true gets merged into the main app state/actions.")]),t([w({id:"lambdas"},"server lambdas"),E("this is the serverside magic."),E("you can define functions that get transpiled into serverside lambdas."),E("server side lambdas will be available for GET and POST requests."),E(["the server side function signature is (req, res) => {},"," as in any nodejs http server, with the addition of req.body being async => awaited before execution of the lambda."])]),t([w({id:"libs"},"external libs"),E(["what would javascript be without the millions of dependencies"," that you can easily install and make the average webpage "," slow[ly] (pun intended) grow towards a footprint of 5 megabytes."]),E("as the sarcastic remark might demonstrate, we think that all of that bloat is unneeded, unheeded and, frankly, not optimal."),E(["magic has one external client side dependency, ",Q({to:"https://github.com/jorgebucharan/hyperapp"},"hyperapp"),", [~400 lines that provide our ui state machine]. thats it. and it won't change."]),E("we also have the tendency to write libraries specialized for our usecase, see @magic/css, @magic/test, @magic/"),E(["once there is a lib key in at least one component,"," window.lib (browser) and global.lib (nodejs) will be set,"," aliasing lib as a global variable in both environments"]),x({id:"libs-dir-or-file"},"lib dir or file"),E(["if you need libraries in multiple otherwise independent modules,"," it might be easier to keep your library dependencies in a central place."," to achieve this, one can simply create /assets/lib.mjs and export an object from it."," this object will get merged into the globalThis.lib object that is available throughout your app.",W("export default { name: () => {} }"),"will turn into",W("lib.name = () => {}")])]),P(a)]},"/core/files/":function coreFiles(a){var b={page:"\nexport default {\n  state: {\n    variable: 'test',\n  },\n  actions: {\n    changeVar: () => ({ variable: 'changed' }),\n  },\n  style: {\n    '.cl': {\n      color: 'green',\n    },\n  },\n  View: state => div({ class: 'cl' }, [\n    'this is the page content.',\n    state.variable,\n  ]),\n}",assets:"\nexport default {\n  Custom: () => div('custom component'),\n  Pre: require('@magic-modules/pre),\n}",app:"\nexport default {\n  state: {\n    globalStateVar: 'globally available',\n  },\n  actions: {\n    globalAction: () => ({ globalStateVar: 'overwritten.' }),\n  },\n  style: {\n    'body': {\n      color: 'green',\n    },\n  },\n}",config:"\nexport default {\n  ROOT: 'example',\n  THEME: 'blue',\n  WEB_ROOT: '/core/',\n\n  // this option adds the\n  // 'X-Clacks-Overhead', 'GNU Terry Pratchet'\n  // http header\n  // see http://www.gnuterrypratchett.com/\n  FOR_DEATH_CAN_NOT_HAVE_HIM: true,\n\n  // default CLIENT_LIB_NAME, overwrite to change names of transpiled css and js files\n  CLIENT_LIB_NAME: 'magic',\n}",theme:"\nexport default {\n  'body': {\n    color: 'blue',\n  },\n}"};return[v(a.title),E("There are multiple magic files and directories."),G([B("/pages - files in the page directory map to urls in your app."),B("/assets - custom components, @magic-modules get imported here"),B("/assets/static - static files"),B("/assets/themes - theme directory, @magic-themes get imported here"),B("/assets/lib.js - imports npm and local but external packages into your app"),B("/app.js - gets merged into the app, can set state, actions, style here"),B("/config.js - custom config for your app"),B("/assets/Menu.js - custom Menu for your app")]),w({id:"pages"},"/pages"),E("the pages dir contains the pages of your webapp."),E(["each page has it's own state and actions, ","but also inherits the global state and actions from the app and it's dependencies"]),x({id:"pages-dir-structure"},"pages directory to url map, for the domain mag.ic:"),W("\n/pages/index.js === http://mag.ic/\n/pages/pageName.js === http://mag.ic/pageName/\n/pages/page-name.js === http://mag.ic/page-name/\n/pages/page_name.js === http://mag.ic/page_name/\n/pages/dir/index.js === http://mag.ic/dir/\n/pages/dir/name.js === http://mag.ic/dir/name/\n"),x({id:"pages-example"},"example page:"),W(b.page),w({id:"assets"},"/assets"),E("the assets dir contains custom components of your app."),E("you can additionally import @magic-modules here"),x({id:"assets-example"},"example /assets/index.js"),W(b.assets),w({id:"static"},"/assets/static"),E("the static dir contains all of your static assets."),E("every file in this directory gets copied to the public dir."),E("image and svg files get minified using imagemin"),E(["text and binary files get compressed using the optional ",Q({to:"https://github.com/jaeh/node-zopfli-es"},"node-zopfli-es")," (if it is installed)"]),w({id:"themes"},"/assets/themes"),E("the themes directory contains... themes."),E("at the moment this is file based, which means you have to manually import themes there."),x({id:"themes-example"},"example theme"),W(b.theme),w({id:"app"},"/assets/app.js"),E("the /app.js file allows you to set global state, actions, and styles"),x({id:"app-example"},"example /app.js"),W(b.app),w({id:"config"},"/config.js"),E("the /config.js file allows you to set various aspects of your app"),x({id:"config-example"},"example /config.js"),W(b.config),w({id:"menu"},"/assets/Menu.js"),E("the /assets/Menu.js file allows you to replace the default Menu component"),x({id:"menu-example"},"example /assets/Menu.js"),Q({to:"https://github.com/magic/core/blob/master/src/modules/Menu.js"},"Menu.js on github"),P(a)]},"/core/libraries/":function coreLibraries(a){return[v(a.title),O(),P(a)]},"/core/modules/":function coreModules(a){return[v(a.title),E("magic modules are predefined modules for webapps."),w({id:"definition"},"module definition:"),E("the minimal module is a function that returns some html."),W("\n// /assets/ModuleName.mjs\n\n// simplest module\nexport const View = () => div('hello, world')\n\n// complete signature\nexport const View = (props = {}, children = []) => div('hello, world')\n"),w({id:"usage"},"usage"),E(["if the npm package name starts with @magic-modules/ or magic-module-, it will get imported automagically."," the name of the Module will be set to a PascalCased version of the remainder of the module name"," for example, @magic-modules/git-badges turns into GitBadges."," the same is true for all uppercased files in your /assets directory."," in the rare case where you want to install a npm module that can not be found, you can import it in /assets/index.mjs"]),W("\n// /assets/index.mjs\nexport default {\n  // ...otherModules\n\n  // load module from node_modules\n  NpmModule: require('not-standard-named-magic-module-from-npm'),\n}"),E("after this, the module will be a global in your app and can be used like any other component."),W("\n// any page or module\nexport default () => div([\n  'modules that do not need props can be used without calling them as a function ',\n  Mod,\n  'modules that need props: ',\n  Mod(propObject),\n"),w({id:"custom-module"},"Mod and Mod.Component:"),T(a),T.Component({title:"Mod Component Title, passed via props"}),x("Mod sourcecode:"),W("\nexport const View = state =>\n  div({ class: 'Mod' }, [\n    h3('Mod.Mod'),\n    p([\n      'this is Mod. it gets loaded from ',\n      Link({ to: 'https://github.com/magic/core/example/assets/module.js' }, '/assets/module.js'),\n    ]),\n    p([\n      'and imported in ',\n      Link({ to: 'https://github.com/magic/core/example/assets/index.js' }, '/assets/index.js'),\n    ]),\n    p(['the state of this module: ', JSON.stringify(state.module)]),\n  ])\n\nexport const state = {\n  module: {\n    test: 'testing',\n  },\n}\n\nexport const style = {\n  margin: '0 0 1em',\n  padding: '0.5em',\n  border: '1px solid',\n  borderColor: 'green',\n\n  h3: {\n    margin: 0,\n  },\n}\n\nexport const global = {\n  state: {\n    module: true,\n  },\n}\n\nexport const Component = props => {\n  props = typeof props === 'string' ? { header: props } : props\n  CHECK_PROPS(props, propTypes, 'ModComponent')\n  const header = props.header || props.title\n\n  return div({ class: 'ModComponent' }, [\n    header && h5(header),\n    p([\n      'Mod.Component, a second component in ',\n      Link({ to: 'https://github.com/magic/core/example/assets/module.mjs' }, '/assets/module.mjs'),\n    ]),\n  ])\n}\n\nComponent.style = {\n  border: '1px solid orange',\n}\n\nexport const propTypes = {\n  ModComponent: [{ key: 'header', type: ['string', 'array'], required: ['title'] }],\n}\n"),w({id:"check-props"},"check props"),E("@magic-modules can export a .propTypes key with an array of prop types."),E("more docs coming soon"),w({id:"preinstalled"},"preinstalled magic modules"),E("magic has some preinstalled modules that will be used in most pages."),w({id:"app"},"app"),E("this is the main app module. it has magically inherited properties and all of it is customizable."),E(["to add actions/state/style to the app you can just create an /assets/app.mjs file.","the contents of this file get ",Q({to:"https://github.com/magic/deep",text:"deep .merged"})," into the app"]),W("\n// /assets/app.mjs\nexport const state = {\n  merge: 'gets merged into state',\n}\nexport const actions = {\n  mergedActions: () => ({ merge: 'merged action executed' }),\n}\nexport const style = {\n  body: {\n    backgroundColor: 'white',\n  },\n}\n"),w({id:"menu"},"menu"),E("the Menu module provides... menus."),E(["just pass it a string which is the state key of the menu,"," then add that menu to the /assets/app.mjs file."]),E(["by default, the menu will only show submenu items if their parent link is active."," to force submenu items to show at all times, just pass a collapse: false prop"]),W("\n// assets/app.mjs\nexport default {\n  state: {\n    // ...state\n    menuName: [\n      { to: '/example-page', text: 'example page' },\n      { to: 'https://example.com', text: 'example.com' },\n      { to: 'https://example.com', nofollow: true, noreferrer: true, target: 'utopia', text: 'nofollow and noref\" },\n    ],\n  },\n  // ... rest of app.mjs\n}"),E("then, in a page or module"),W("\nexport default () => Menu({ name: 'menuName', collapse: false })\n\n// output:\n<nav class=\"Menu\">\n  <ul>\n    <li>\n      <a onclick=\"actions.go\" href=\"{{ WEB_ROOT }}example-page\">example page</a>\n    </li>\n    <li>\n      <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener\">example.com</a>\n    </li>\n    <li>\n      <a href=\"https://example.com\" target=\"utopia\" rel=\"noopener nofollow noreferrer\">nofollow and noref</a>\n    </li>\n  </ul>\n</nav>\n}"),x({id:"menu-props"},"Menu props"),E("the Menu module allows multiple props to be passed when instantiating the Menu"),W("\nMenu({\n  collapse: false, // (default: true) menu will always show all submenu items\n})"),x({id:"menu-item-props"},"Menu.Item props"),E(["every MenuItem accepts props the same props as a link does."," additionally a MenuItem accepts a items prop with sub menu items."]),W("\nconst menuItem = ({\n  to: '/url',\n  text: 'link text',\n  items: [SubMenuItems],\n  noreferrer: true, // set rel='noreferer'\n  nofollow: true, // set rel='nofollow'\n})"),x({id:"menu-sub-menus"},"sub menus"),E("to define a submenu, simply define a .items array on the menu item"),W("\n// assets/app.mjs\nexport default {\n  state: {\n    // ...state\n    menuName: [\n      {\n        to: '/example-page',\n        text: 'example page',\n        items: [\n          { to: '/example-page/#sub', text: 'example sub page' },\n      ] },\n    ],\n  },\n  // ... rest of app.mjs\n}"),w({id:"link"},"link"),E("the link module allows you to link to things."),W("\n// in any page or module View\nexport default () => [\n  Link({ to: '/page', text: 'page' }),\n  // output: <a href=\"/page\" onclick=\"actions.go\">page</a>\n  Link({ to: 'https://example.com', text: 'page' }),\n  // output: <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener\">page</a>\n  Link({ to: '/page', text: 'page', nofollow: true, noreferrer: true }),\n  // output: <a href=\"https://example.com\" target=\"_blank\" rel=\"nofollow noreferrer noopener\">page</a>\n\n  // you can also use children syntax instead of the text prop:\n  Link({ to: '/' }, 'home'),\n\n  // Link also supports # hash links\n  Link({ to: '/#hash' }, 'home with hash'),\n]"),w({id:"img"},"img"),E("the img module adds some sane default values to your images."),W("\n// in any page or module View\nexport default () => [\n  Img('/image.png'),\n  // output: <img src=\"/image.png\" alt=\"\" role=\"presentation\"/>\n  Img({ src: '/image.png }),\n  // output: <img src=\"/image.png\" alt=\"\" role=\"presentation\"/>\n  Img({ src: '/image.png', alt: 'image description' }),\n  // output: <img src=\"/image.png alt=\"image description\" />\n  Img({ src: '/image.png', title: 'image title', }),\n  // output: <img src=\"/image.png\" title=\"image title\" alt=\"image title\"/>\n  Img({ src: '/image.png', title: 'image title', alt: 'image alt' }),\n  // output: <img src=\"/image.png\" title=\"image title\" alt=\"image alt\"/>\n]"),w({id:"footer"},"footer"),E("the footer module contains a small info text and a link to the magic github repository."),E("to overwrite this behaviour, just place a Footer.mjs file in your assets and require it in /assets/index.mjs."),W("\n// /assets/Footer.mjs:\nconst Footer = () =>\nfooter({ class: 'main' }, [\n  div({ class: 'wrapper' }, [\n    'made with a few bits of ',\n    Link({ href: 'https://github.com/magic/core', target: '_blank', rel: 'noopener' }, 'magic'),\n  ]),\n])\n\nFooter.style: {\n  'footer.main': {\n    position: 'relative',\n    textAlign: 'center',\n    padding: '5em 0 .5em',\n  },\n}\n\nexport default Footer\n"),U(),P(a)]},"/core/themes/":function coreThemes(a){return[v(a.title),E("magic themes are themes for magic apps. you decide which theme to load by specifying the theme name in config.THEME"),W("\n// /config.js\nexport default {\n  // ...rest of config,\n  THEME: 'blue',\n}\n"),w("theme load order"),E("themes get loaded from multiple places. last in the list overwrites earlier entries."),W("\n// ...default module styles get inserted here\n/node_modules/@magic/core/src/themes/THEME/index.js\n/node_modules/@magic-themes/THEME\n/assets/themes/THEME/index.js\n"),Y(),P(a)]}};h({init:function init(){return f({},H,{url:window.location.pathname})},subscriptions:function subscriptions(){return[[I.listenPopState,$.pop]]},view:function view(a){var b=_[a.url]?a.url:"/404/",c=_[b];return a.pages&&a.pages[b]&&Object.keys(a.pages[b]).forEach(function(c){a[c]=a.pages[b][c]}),V({page:c,state:a})},node:document.getElementById("Magic")});